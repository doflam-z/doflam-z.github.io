<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://doflam-z.github.io/rss.xml" rel="self" type="application/rss+xml"/>
    <title>CodeNote</title>
    <link>https://doflam-z.github.io/</link>
    <description>ç¬”è®°ç½‘ç«™ã€‚</description>
    <language>zh-CN</language>
    <pubDate>Wed, 02 Jul 2025 02:00:46 GMT</pubDate>
    <lastBuildDate>Wed, 02 Jul 2025 02:00:46 GMT</lastBuildDate>
    <generator>vuepress-plugin-feed2</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <item>
      <title>rabbitmq</title>
      <link>https://doflam-z.github.io/services/rabbitmq.html</link>
      <guid>https://doflam-z.github.io/services/rabbitmq.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">rabbitmq</source>
      <pubDate>Wed, 23 Apr 2025 02:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="rabbitmq" tabindex="-1"> rabbitmq</h1>
<blockquote>
<p>rabbitmqçš„éƒ¨ç½²ï¼Œé›†ç¾¤é…ç½®ï¼Œå¸¸ç”¨å‘½ä»¤ç­‰</p>
</blockquote>
<h2 id="dockeréƒ¨ç½²rabbitmq" tabindex="-1"> dockeréƒ¨ç½²rabbitmq</h2>
<blockquote>
<p>éƒ¨ç½²åœ¨å†…ç½‘ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½¿ç”¨é•œåƒé›†ç¾¤é…ç½®</p>
</blockquote>
<h3 id="ä¸¤å°æœºç”Ÿæˆé…ç½®æ–‡ä»¶" tabindex="-1"> ä¸¤å°æœºç”Ÿæˆé…ç½®æ–‡ä»¶</h3>
<p>node1 docker-compose.yml</p>
<div><pre><code><span>version</span><span>:</span> <span>'3.8'</span>
<span>services</span><span>:</span>
  <span>rabbitmq</span><span>:</span>
    <span>image</span><span>:</span> rabbitmq<span>:</span>3.12.8<span>-</span>management
    <span>container_name</span><span>:</span> rabbitmq
    <span>hostname</span><span>:</span> node1 <span># èŠ‚ç‚¹åç§°</span>
    <span>restart</span><span>:</span> unless<span>-</span>stopped <span># é™¤éstopå‘½ä»¤å¦åˆ™è‡ªåŠ¨é‡å¯</span>
    <span>mem_limit</span><span>:</span> 8g        <span># é™åˆ¶æœ€å¤šä½¿ç”¨ 8GB å†…å­˜</span>
    <span>cpus</span><span>:</span> <span>6</span>              <span># é™åˆ¶æœ€å¤šä½¿ç”¨ 6 ä¸ª CPU</span>
    <span>ports</span><span>:</span>
      <span>-</span> <span>"192.168.2.135:5672:5672"</span>  <span># AMQPåè®®ç«¯å£</span>
      <span>-</span> <span>"15672:15672"</span>  <span># ç®¡ç†ç•Œé¢ç«¯å£</span>
      <span>-</span> <span>"192.168.2.135:4369:4369"</span> <span># é›†ç¾¤é€šä¿¡ç«¯å£</span>
      <span>-</span> <span>"192.168.2.135:25672:25672"</span> <span># é›†ç¾¤é€šä¿¡ç«¯å£</span>
    <span>environment</span><span>:</span>
      <span>RABBITMQ_DEFAULT_USER</span><span>:</span> <span>"jobui"</span>
      <span>RABBITMQ_DEFAULT_PASS</span><span>:</span> <span>"jobui123"</span>
      <span>RABBITMQ_ERLANG_COOKIE</span><span>:</span> <span>"jobui_rabbit"</span>  <span># é›†ç¾¤é€šä¿¡å¯†é’¥</span>
      <span>RABBITMQ_NODENAME</span><span>:</span> rabbit@node1
    <span>volumes</span><span>:</span>
      <span>-</span> /ssd_data/rabbitmq/data<span>:</span>/var/lib/rabbitmq  <span># æ•°æ®æŒä¹…åŒ–</span>
    <span>extra_hosts</span><span>:</span>
      <span>-</span> <span>"node2:192.168.2.139"</span> <span># å…³é”®ï¼šè®©å®¹å™¨èƒ½è§£ænode2</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>node2 docker-compose.yml</p>
<div><pre><code><span>version</span><span>:</span> <span>'3.8'</span>
<span>services</span><span>:</span>
  <span>rabbitmq</span><span>:</span>
    <span>image</span><span>:</span> rabbitmq<span>:</span>3.12.8<span>-</span>management <span># æˆ–æŒ‡å®šç‰ˆæœ¬å¦‚ rabbitmq:3.12</span>
    <span>container_name</span><span>:</span> rabbitmq
    <span>hostname</span><span>:</span> node2
    <span>restart</span><span>:</span> unless<span>-</span>stopped
    <span>mem_limit</span><span>:</span> 8g        <span># é™åˆ¶æœ€å¤šä½¿ç”¨ 8GB å†…å­˜</span>
    <span>cpus</span><span>:</span> <span>6</span>              <span># é™åˆ¶æœ€å¤šä½¿ç”¨ 6 ä¸ª CPU</span>
    <span>ports</span><span>:</span>
      <span>-</span> <span>"192.168.2.139:5672:5672"</span>  <span># AMQPåè®®ç«¯å£</span>
      <span>-</span> <span>"192.168.2.139:4369:4369"</span>  <span># é›†ç¾¤é€šä¿¡ç«¯å£</span>
      <span>-</span> <span>"192.168.2.139:25672:25672"</span>
    <span>environment</span><span>:</span>
      <span>RABBITMQ_DEFAULT_USER</span><span>:</span> <span>"jobui"</span>
      <span>RABBITMQ_DEFAULT_PASS</span><span>:</span> <span>"jobui123"</span>
      <span>RABBITMQ_ERLANG_COOKIE</span><span>:</span> <span>"jobui_rabbit"</span>  <span># é›†ç¾¤é€šä¿¡å¯†é’¥</span>
      <span>RABBITMQ_NODENAME</span><span>:</span> rabbit@node2
      <span>RABBITMQ_CLUSTER_NODES</span><span>:</span> rabbit@node1  <span># æŒ‡å‘åˆå§‹èŠ‚ç‚¹</span>
    <span>volumes</span><span>:</span>
      <span>-</span> /ssdb_data/rabbitmq/data<span>:</span>/var/lib/rabbitmq
    <span>extra_hosts</span><span>:</span>
      <span>-</span> <span>"node1:192.168.2.135"</span>  <span># å…³é”®ï¼šè®©å®¹å™¨èƒ½è§£ænode1</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="åˆ†åˆ«å¯åŠ¨å®¹å™¨" tabindex="-1"> åˆ†åˆ«å¯åŠ¨å®¹å™¨</h3>
<div><pre><code><span>docker-compose</span> up <span>-d</span>
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="èŠ‚ç‚¹dnsé…ç½®å†™å…¥hosts" tabindex="-1"> èŠ‚ç‚¹dnsé…ç½®å†™å…¥hosts</h3>
<p>node1å†™å…¥</p>
<div><pre><code><span>echo</span> <span>"192.168.2.139 node2"</span> <span>|</span> <span>sudo</span> <span>tee</span> <span>-a</span> /etc/hosts
</code></pre><div aria-hidden="true"><div></div></div></div><p>node2å†™å…¥</p>
<div><pre><code><span>echo</span> <span>"192.168.2.135 node1"</span> <span>|</span> <span>sudo</span> <span>tee</span> <span>-a</span> /etc/hosts
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="node2åŠ å…¥é›†ç¾¤" tabindex="-1"> node2åŠ å…¥é›†ç¾¤</h3>
<div><pre><code><span>docker</span> <span>exec</span> rabbitmq rabbitmqctl stop_app	<span># åœæ­¢æœåŠ¡</span>
<span>docker</span> <span>exec</span> rabbitmq rabbitmqctl reset <span># é‡ç½®æœåŠ¡ï¼ˆä¼šæ¸…é™¤æ•°æ®ï¼‰</span>
<span>docker</span> <span>exec</span> rabbitmq rabbitmqctl join_cluster rabbit@node1 <span># åŠ å…¥èŠ‚ç‚¹</span>
<span>docker</span> <span>exec</span> rabbitmq rabbitmqctl start_app <span># å¯åŠ¨æœåŠ¡</span>
<span>docker</span> <span>exec</span> rabbitmq rabbitmqctl cluster_status <span># æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="é…ç½®é•œåƒé›†ç¾¤" tabindex="-1"> é…ç½®é•œåƒé›†ç¾¤</h3>
<p>åœ¨ä»»æ„èŠ‚ç‚¹æ‰§è¡Œ</p>
<div><pre><code><span>docker</span> <span>exec</span> <span>-it</span> rabbitmq rabbitmqctl set_policy ha-all <span>"^"</span> <span>'{"ha-mode":"all"}'</span>
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="é…ç½®é˜²ç«å¢™" tabindex="-1"> é…ç½®é˜²ç«å¢™</h3>
<blockquote>
<p>dockerå¯åŠ¨çš„ç«¯å£é»˜è®¤æ‰€æœ‰ipéƒ½èƒ½è¯·æ±‚ï¼Œä¸å®‰å…¨ï¼Œä½†æ˜¯docker ä¼šè¦†ç›– <code>firewalld</code> çš„éƒ¨åˆ†è§„åˆ™ï¼Œéœ€åœ¨ <code>DOCKER-USER</code> é“¾ä¸­æ·»åŠ è§„åˆ™ï¼Œå…ˆç¦ç”¨æ‰€æœ‰ipè®¿é—®webç®¡ç†ç«¯å£å†é…ç½®åªå…è®¸æŒ‡å®šipè®¿é—®ï¼Œ</p>
</blockquote>
<div><pre><code><span>sudo</span> iptables <span>-I</span> DOCKER-<span>USER</span> <span>-p</span> tcp <span>--dport</span> <span>15672</span> <span>-j</span> DROP
<span>sudo</span> iptables <span>-I</span> DOCKER-<span>USER</span> <span>-p</span> tcp <span>--dport</span> <span>15672</span> <span>-s</span> <span>192.168</span>.1.10 <span>-j</span> ACCEPT
</code></pre><div aria-hidden="true"><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>GitHub æœç´¢æŠ€å·§é€ŸæŸ¥è¡¨</title>
      <link>https://doflam-z.github.io/tool/github.html</link>
      <guid>https://doflam-z.github.io/tool/github.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">GitHub æœç´¢æŠ€å·§é€ŸæŸ¥è¡¨</source>
      <pubDate>Thu, 27 Mar 2025 07:44:02 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="github-æœç´¢æŠ€å·§é€ŸæŸ¥è¡¨" tabindex="-1"> GitHub æœç´¢æŠ€å·§é€ŸæŸ¥è¡¨</h1>
<table>
<thead>
<tr>
<th>æœç´¢ç±»å‹</th>
<th>è¯­æ³•ç¤ºä¾‹</th>
<th>è¯´æ˜</th>
<th>å®é™…åº”ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åŸºç¡€æœç´¢</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ä»“åº“åç§°</td>
<td><code>in:name vue</code></td>
<td>æœç´¢åç§°åŒ…å«&quot;vue&quot;çš„ä»“åº“</td>
<td>æ‰¾ç‰¹å®šæŠ€æœ¯æ ˆçš„æ¡†æ¶/åº“</td>
</tr>
<tr>
<td>ä»“åº“æè¿°</td>
<td><code>in:description æœºå™¨å­¦ä¹ </code></td>
<td>æœç´¢æè¿°åŒ…å«&quot;æœºå™¨å­¦ä¹ &quot;çš„ä»“åº“</td>
<td>å‘ç°ç‰¹å®šé¢†åŸŸçš„é¡¹ç›®</td>
</tr>
<tr>
<td>READMEå†…å®¹</td>
<td><code>in:readme å®‰è£…æŒ‡å—</code></td>
<td>æœç´¢READMEåŒ…å«&quot;å®‰è£…æŒ‡å—&quot;çš„ä»“åº“</td>
<td>æ‰¾æœ‰è¯¦ç»†æ–‡æ¡£çš„é¡¹ç›®</td>
</tr>
<tr>
<td><strong>é«˜çº§ç­›é€‰</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>æ˜Ÿæ ‡æ•°</td>
<td><code>stars:&gt;1000</code></td>
<td>æœç´¢æ˜Ÿæ ‡è¶…è¿‡1000çš„ä»“åº“</td>
<td>æ‰¾é«˜è´¨é‡çƒ­é—¨é¡¹ç›®</td>
</tr>
<tr>
<td>Forkæ•°</td>
<td><code>forks:&gt;500</code></td>
<td>æœç´¢Forkè¶…è¿‡500çš„ä»“åº“</td>
<td>æ‰¾è¢«å¹¿æ³›ä½¿ç”¨çš„é¡¹ç›®</td>
</tr>
<tr>
<td>æ–‡ä»¶å¤§å°</td>
<td><code>size:100..500</code></td>
<td>æœç´¢100KBåˆ°500KBå¤§å°çš„ä»“åº“</td>
<td>æ‰¾è½»é‡çº§å·¥å…·åº“</td>
</tr>
<tr>
<td><strong>è¯­è¨€/æ—¶é—´</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç¼–ç¨‹è¯­è¨€</td>
<td><code>language:python</code></td>
<td>æœç´¢Pythoné¡¹ç›®</td>
<td>æ‰¾ç‰¹å®šè¯­è¨€çš„èµ„æº</td>
</tr>
<tr>
<td>æ›´æ–°æ—¶é—´</td>
<td><code>pushed:&gt;2024-01-01</code></td>
<td>æœç´¢2024å¹´åæ›´æ–°è¿‡çš„é¡¹ç›®</td>
<td>æ‰¾è¿‘æœŸæ´»è·ƒç»´æŠ¤çš„é¡¹ç›®</td>
</tr>
<tr>
<td><strong>ç»„åˆæœç´¢</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>å¤šæ¡ä»¶ç»„åˆ</td>
<td><code>in:name react stars:&gt;5000 language:javascript</code></td>
<td>æœç´¢åç§°å«reactã€æ˜Ÿæ ‡&gt;5kçš„JSé¡¹ç›®</td>
<td>æ‰¾Reactç”Ÿæ€çš„æµè¡Œåº“</td>
</tr>
<tr>
<td><strong>ç‰¹æ®Šæœç´¢</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç”¨æˆ·ä»“åº“</td>
<td><code>user:google</code></td>
<td>æœç´¢Googleç”¨æˆ·çš„æ‰€æœ‰ä»“åº“</td>
<td>è·Ÿè¸ªç‰¹å®šå¼€å‘è€…/å…¬å¸çš„é¡¹ç›®</td>
</tr>
<tr>
<td>ç»„ç»‡ä»“åº“</td>
<td><code>org:facebook</code></td>
<td>æœç´¢Facebookç»„ç»‡çš„æ‰€æœ‰ä»“åº“</td>
<td>å…³æ³¨å¤§å‚å¼€æºé¡¹ç›®</td>
</tr>
<tr>
<td>è®¸å¯è¯ç±»å‹</td>
<td><code>license:MIT</code></td>
<td>æœç´¢MITè®¸å¯è¯çš„é¡¹ç›®</td>
<td>æ‰¾å¯è‡ªç”±ä½¿ç”¨çš„ä»£ç </td>
</tr>
<tr>
<td><strong>ä»£ç æœç´¢</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>æ–‡ä»¶å†…å®¹</td>
<td><code>å¿«é€Ÿæ’åº in:file language:java</code></td>
<td>æœç´¢Javaæ–‡ä»¶ä¸­çš„å¿«é€Ÿæ’åºå®ç°</td>
<td>æ‰¾ç®—æ³•å®ç°ç¤ºä¾‹</td>
</tr>
<tr>
<td>æ–‡ä»¶è·¯å¾„</td>
<td><code>path:src/utils function debounce</code></td>
<td>åœ¨src/utilsè·¯å¾„ä¸‹æœç´¢é˜²æŠ–å‡½æ•°</td>
<td>å®šä½ç‰¹å®šåŠŸèƒ½çš„å®ç°ä½ç½®</td>
</tr>
</tbody>
</table>
<h2 id="ğŸ’¡-ä½¿ç”¨æŠ€å·§" tabindex="-1"> ğŸ’¡ ä½¿ç”¨æŠ€å·§</h2>
<ol>
<li>
<p><strong>ç»„åˆä½¿ç”¨</strong>ï¼š<code>in:name vue stars:&gt;10000 pushed:&gt;2023-01-01</code><br>
â†’ æ‰¾2023å¹´åæ›´æ–°çš„ã€æ˜Ÿæ ‡è¶…1ä¸‡çš„Vueé¡¹ç›®</p>
</li>
<li>
<p><strong>æ’é™¤å…³é”®è¯</strong>ï¼š<code>NOT æ—§ç‰ˆæœ¬</code><br>
â†’ æ’é™¤åŒ…å«&quot;æ—§ç‰ˆæœ¬&quot;çš„ç»“æœ</p>
</li>
<li>
<p><strong>èŒƒå›´æœç´¢</strong>ï¼š<code>stars:100..500</code><br>
â†’ æ‰¾æ˜Ÿæ ‡åœ¨100åˆ°500ä¹‹é—´çš„é¡¹ç›®</p>
</li>
<li>
<p><strong>æ’åºç»“æœ</strong>ï¼šåœ¨GitHubæœç´¢ç»“æœé¡µé¢å¯ä»¥æŒ‰<code>Most stars</code>/<code>Recently updated</code>ç­‰æ’åº</p>
</li>
</ol>
<blockquote>
<p>ğŸ“Œ æç¤ºï¼šåœ¨GitHubæœç´¢é¡µé¢ç‚¹å‡»&quot;Advanced search&quot;å¯ä½¿ç”¨å¯è§†åŒ–å·¥å…·æ„å»ºå¤æ‚æŸ¥è¯¢</p>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>Laravel</title>
      <link>https://doflam-z.github.io/php/laravel.html</link>
      <guid>https://doflam-z.github.io/php/laravel.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">Laravel</source>
      <pubDate>Mon, 24 Mar 2025 02:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="laravel" tabindex="-1"> Laravel</h1>
<h3 id="ä½¿ç”¨composeræ–¹å¼éƒ¨ç½²laravelé¡¹ç›®" tabindex="-1"> ä½¿ç”¨composeræ–¹å¼éƒ¨ç½²laravelé¡¹ç›®</h3>
<p>åˆ‡æ¢å›½å†…é•œåƒ<a href="https://pkg.phpcomposer.com/" target="_blank" rel="noopener noreferrer">åœ°å€</a></p>
<div><pre><code><span>composer</span> config <span>-g</span> repo.packagist <span>composer</span> h <span>[</span>laravel.md<span>]</span><span>(</span>laravel.md<span>)</span> ttps://packagist.phpcomposer.com
</code></pre><div aria-hidden="true"><div></div></div></div><p>åˆ é™¤é•œåƒï¼ˆæ¢å¤å®˜æ–¹æºï¼‰</p>
<div><pre><code><span>composer</span> config <span>-g</span> <span>--unset</span> repos.packagist
</code></pre><div aria-hidden="true"><div></div></div></div><p>ä½¿ç”¨composeréƒ¨ç½²laravelé¡¹ç›®</p>
<div><pre><code><span># åœ¨å½“å‰ç›®å½•çš„/project_2020-3-16ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºlaravelçš„laravelé¡¹ç›®ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬laravelï¼Œä»¥å‹ç¼©åŒ…å½¢å¼ä»gitä¸Šä¸‹è½½</span>
<span>composer</span> create-project laravel/laravel --prefer-dist ./project_2020-3-16

<span># ä¹Ÿå¯æŒ‡å®šlaravelç‰ˆæœ¬</span>
<span>composer</span> create-project laravel/laravel<span>=</span><span>5.8</span>.* --prefer-dist ./project_2020-3-16
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p><strong>å‘½ä»¤è§£é‡Šï¼š</strong></p>
<p>composerï¼šè¡¨ç¤ºæ‰§è¡Œcomposerç¨‹åºï¼›</p>
<p>create-projectï¼šé€šè¿‡composerå»åˆ›å»ºé¡¹ç›®ï¼›</p>
<p>laravel/Laravelï¼šéœ€è¦åˆ›å»ºçš„é¡¹ç›®åç§°ï¼›</p>
<p>--prefer-distï¼šä¼˜å…ˆä¸‹è½½å‹ç¼©åŒ…æ–¹å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä»githubä¸Šä¸‹è½½æºç ï¼ˆå…‹éš†ï¼‰ï¼›</p>
<p>./ï¼šè¡¨ç¤ºåˆ›å»ºçš„é¡¹ç›®ç›®å½•ä½ç½®ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç›®å½•åï¼›</p>
<p>æŒ‡å®šç‰ˆæœ¬åˆ›å»ºlaravelï¼š</p>
<p><code>composer create-project laravel/laravel=5.4.* --prefer-dist ./</code></p>
<p><strong>æŸ¥çœ‹ç³»ç»Ÿä¸­å·²æœ‰çš„è·¯ç”±åˆ—è¡¨</strong>=&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•è¾“å…¥ ï¼š<code>php artisan route:list</code></p>
<p>è·¯ç”±ç¾¤ç»„å†™æ³•ï¼š</p>
<p><code>Route::goup(['frefix'=&gt;'admin'],function(){</code></p>
<p>â€‹		<code>Route::get('test',function(){ echo &quot;åŒ¹é…/admin/test&quot;;})</code></p>
<p><code>});</code></p>
<p><strong>åˆ›å»ºæ§åˆ¶å™¨</strong>TestController</p>
<p><code>php artisan make:controller TestController</code></p>
<p><strong>åˆ›å»ºæ¨¡å‹</strong>Test</p>
<p><code>php artisan make:model Home/Test</code></p>
<p><strong>No Application Encryption Key Has Been Specified</strong></p>
<ol>
<li>
<p>å¤åˆ¶.env.exampleåˆ°.envï¼š</p>
</li>
<li>
<p>cp -a .env.example .env</p>
</li>
<li>
<p>ç”Ÿæˆå¯†é’¥ï¼š</p>
</li>
<li>
<p>php artisan key:generate</p>
</li>
<li>
<p>ç„¶åæ‰è¿è¡Œï¼š</p>
</li>
<li>
<p>php artisan serve</p>
</li>
</ol>
<p><strong>Php artisan make:auth command is not defined</strong></p>
<p>Follow these three steps
Step 1 - First do this:</p>
<p>laravel new project</p>
<p><code>cd project</code></p>
<p><code>composer require laravel/ui --dev</code>
Note: Laravel UI Composer package is a new first-party package that extracts the UI portion of a Laravel project ( frontend scaffolding typically provided with previous releases of Laravel ) into a separate laravel/ui package. The separate package enables the Laravel team to update, develop and version UI scaffolding package separately from the primary framework and the main Laravel codebase.</p>
<p>Step 2 - Then do this:</p>
<p><code>php artisan ui bootstrap --auth</code>      <code>php artisan migrate</code>
or</p>
<p><code>php artisan ui vue --auth</code>   <code>php artisan migrate</code>
instead of</p>
<p><code>php artisan make:auth  ( which works for Laravel 5.8 and older versions )</code></p>
<p><code>npm install &amp;&amp; npm run dev</code></p>
<p><strong>php artisan migrateé”™è¯¯</strong></p>
<p><code>App\Providers\AppServiceProvider.php</code></p>
<p><code>use Illuminate\Support\Facades\Schema;</code></p>
<p><code>...</code></p>
<p><code>public function boot()</code>
<code>{</code>
<code>				Schema::defaultStringLength(191);</code>
<code>}</code></p>
<h3 id="ä½¿ç”¨dockerå®‰è£…laravel" tabindex="-1"> ä½¿ç”¨dockerå®‰è£…laravel</h3>
<p>å…ˆå®‰è£…dockerã€docker-composeå</p>
<div><pre><code><span>curl</span> <span>-s</span> https://laravel.build/example-app <span>|</span> <span>bash</span>

<span>curl</span> <span>-s</span> <span>"https://laravel.build/example-app?with=mysql,redis"</span> <span>|</span> <span>bash</span>
<span>#å¦‚æœä½ æ²¡æœ‰åˆ¶å®šä½ æƒ³é…ç½®çš„æœåŠ¡ï¼Œé»˜è®¤å°†é…ç½® mysqlï¼Œredisï¼Œmeilisearchï¼Œmailhog å’Œ selenium</span>

<span>cd</span> example-app

<span>#ç¼–è¯‘å¹¶å¯åŠ¨ï¼ˆå‰å°ï¼‰-då‚æ•°æ˜¯åå°å¯åŠ¨</span>
./vendor/bin/sail up
./vendor/bin/sail up <span>-d</span>

<span>#å¯åŠ¨</span>
./vendor/bin/sail start
<span>#åœæ­¢</span>
./vendor/bin/sail stop


</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>PHP</title>
      <link>https://doflam-z.github.io/php/php.html</link>
      <guid>https://doflam-z.github.io/php/php.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">PHP</source>
      <pubDate>Mon, 24 Mar 2025 02:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="php" tabindex="-1"> PHP</h1>
<h3 id="å¸¸ç”¨å‡½æ•°" tabindex="-1"> å¸¸ç”¨å‡½æ•°</h3>
<div><pre><code>parse_str â€” å°†å­—ç¬¦ä¸²è§£ææˆå¤šä¸ªå˜é‡
<span>parse_str</span><span>(</span><span>"name=Bill&amp;age=60"</span><span>,</span><span>$arr</span><span>)</span><span>;</span><span>//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªä¸ºç»“æœæ•°ç»„</span>

<span>array_filter</span><span>(</span> <span>array</span> <span>$input</span><span>[</span><span>,</span> <span>callable</span> <span>$callback</span> <span>=</span> <span>""</span><span>]</span> <span>)</span> 
<span>// ç”¨å›è°ƒå‡½æ•°è¿‡æ»¤æ•°ç»„ä¸­çš„å•å…ƒ ä¾æ¬¡å°† input æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ä¼ é€’åˆ° callback å‡½æ•°ã€‚å¦‚æœ callback å‡½æ•°è¿”å› TRUEï¼Œåˆ™ input æ•°ç»„çš„å½“å‰å€¼ä¼šè¢«åŒ…å«åœ¨è¿”å›çš„ç»“æœæ•°ç»„ä¸­ã€‚æ•°ç»„çš„é”®åä¿ç•™ä¸å˜ï¼Œå¦‚æœæ²¡æœ‰æä¾› callback å‡½æ•°ï¼Œå°†åˆ é™¤ input ä¸­æ‰€æœ‰ç­‰å€¼ä¸º FALSE çš„æ¡ç›®</span>

explode <span>//ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²å¦ä¸€ä¸ªå­—ç¬¦ä¸²</span>
range <span>//å»ºç«‹ä¸€ä¸ªæŒ‡å®šèŒƒå›´çš„æ•°ç»„</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="fpm" tabindex="-1"> fpm</h3>
<div><pre><code><span>#1ã€æŸ¥çœ‹php-fpmçš„è¿›ç¨‹ä¸ªæ•°</span>
<span>ps</span> <span>-ef</span> <span>|</span><span>grep</span> <span>"php-fpm"</span><span>|</span><span>grep</span> <span>"pool"</span><span>|</span><span>wc</span> <span>-l</span>
<span>#2ã€æŸ¥çœ‹æ¯ä¸ªphp-fpmå ç”¨çš„å†…å­˜å¤§å°</span>
<span>ps</span> <span>-ylC</span> php-fpm <span>--sort:rss</span>
<span>#3.æŸ¥çœ‹PHP-FPMåœ¨ä½ çš„æœºå™¨ä¸Šçš„å¹³å‡å†…å­˜å ç”¨</span>
<span>ps</span> --no-headers <span>-o</span> <span>"rss,cmd"</span> <span>-C</span> php-fpm <span>|</span> <span>awk</span> <span>'{ sum+=$1 } END { printf ("%d%s\n", sum/NR/1024,"M") }'</span>
<span>#4.æŸ¥çœ‹å•ä¸ªphp-fpmè¿›ç¨‹æ¶ˆè€—å†…å­˜çš„æ˜ç»†</span>
pmap <span><span>$(</span>pgrep php-fpm<span>)</span></span> <span>|</span> <span>less</span>


<span>#æŸ¥çœ‹phpã€nginxç¼–è¯‘å‚æ•°</span>
nginx <span>-V</span>
php <span>-i</span> <span>|</span><span>grep</span> configure

<span>#grepä¸è¾“å‡ºæ³¨é‡Šçš„è¡Œ</span>
<span>grep</span> <span>"^[^#;]"</span> smb.conf

</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>é‡å¯å¤šä¸ªphp-fpm</p>
<div><pre><code><span>#php-fpmæ·»åŠ serviceæœåŠ¡</span>
<span>cp</span> /usr/local/src/php5.6.40/sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm

update-rc.d php-fpm defaults
 
<span># æ·»åŠ </span>
update-rc.d ServiceName defaults
 
<span># åˆ é™¤</span>
update-rc.d ServiceName remove

<span>#å…³é—­php-fpm</span>
<span>pkill</span> php-fpm æˆ–è€… <span>killall</span> php-fpm

<span>#æŸ¥çœ‹php-fpmé…ç½®æ–‡ä»¶è·¯å¾„</span>
<span>ps</span> aux <span>|</span><span>grep</span> php-fpm

<span>#æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°pidè·¯å¾„</span>
pid <span>=</span> /dev/shm/php-fpm-9001.pid

<span>#æ ¹æ®pidé‡å¯php-fpm</span>
<span>sudo</span> <span>kill</span> <span>-USR2</span> <span><span>`</span><span>cat</span> /dev/shm/php-fpm-9001.pid<span>`</span></span>

</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="phpå¤šçº¿ç¨‹" tabindex="-1"> phpå¤šçº¿ç¨‹</h3>
<p>å¼€å¯parallelå¤šçº¿ç¨‹æ‰©å±• --enable-maintainer-zts</p>
<div><pre><code><span>#parallel</span>
 <span>cd</span> /usr/local/src/php7/parallel-1.1.4 <span>&amp;&amp;</span> <span>\</span>
 /web/software/php-7.4.28/bin/phpize <span>&amp;&amp;</span> <span>\</span>
 ./configure --with-php-config<span>=</span>/web/software/php-7.4.28/bin/php-config <span>&amp;&amp;</span> <span>\</span>
 <span>make</span> <span>&amp;&amp;</span> <span>make</span> <span>install</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>ç¤ºä¾‹ï¼š</p>
<div><pre><code><span><span>&lt;?php</span>
<span>require_once</span> <span>'baseClassV4/listen/BaseCache.php'</span><span>;</span>
<span>$redis</span> <span>=</span> <span>new</span> <span>BaseCache</span> <span>(</span><span>'redis'</span><span>,</span> <span>'default'</span><span>)</span><span>;</span>
<span>$startTime</span> <span>=</span> <span>time</span><span>(</span><span>)</span><span>;</span>
<span>$num</span> <span>=</span> <span>10</span><span>;</span>
<span>$j</span> <span>=</span> <span>0</span><span>;</span>
<span>$list</span> <span>=</span> <span>range</span><span>(</span><span>0</span><span>,</span> <span>1000</span><span>)</span><span>;</span>
<span>$path</span> <span>=</span> <span>'baseClassV4/listen/BaseCache.php'</span><span>;</span>

<span>$producer</span> <span>=</span> <span>function</span> <span>(</span><span>$parameters</span><span>)</span> <span>{</span> <span>// çº¿ç¨‹è°ƒç”¨å›è°ƒå‡½æ•°ä½“</span>
	<span>$i</span> <span>=</span> <span>0</span><span>;</span>
	<span>extract</span><span>(</span><span>$parameters</span><span>)</span><span>;</span> 
	<span>foreach</span> <span>(</span><span>$list</span> <span>as</span> <span>$item</span><span>)</span> <span>{</span>
		<span>$r</span> <span>=</span> <span>$redis</span><span>-></span><span>zIncrBy</span><span>(</span><span>'test'</span><span>,</span> <span>1</span><span>,</span> <span>$threadNum</span><span>)</span><span>;</span>
		<span>if</span> <span>(</span><span>$r</span> <span>></span> <span>0</span><span>)</span> <span>{</span>
			<span>$i</span><span>++</span><span>;</span>
		<span>}</span>
		<span>echo</span> <span>$threadNum</span> <span>.</span> <span>':'</span> <span>.</span> <span>$item</span> <span>.</span> <span>PHP_EOL</span><span>;</span>
		<span>usleep</span><span>(</span><span>10000</span><span>)</span><span>;</span>
	<span>}</span>
	<span>return</span> <span>$i</span><span>;</span>
<span>}</span><span>;</span>

<span>function</span> <span>start_threads</span><span>(</span><span>$list</span><span>,</span> <span>$producer</span><span>,</span> <span>$threadNum</span> <span>=</span> <span>1</span><span>,</span> <span>$parameters</span> <span>=</span> <span>[</span><span>]</span><span>,</span> <span>$path</span> <span>=</span> <span>''</span><span>,</span> <span>$sleep</span> <span>=</span> <span>1</span><span>)</span>
<span>{</span>
	<span>$list</span> <span>=</span> <span>array_chunk</span><span>(</span><span>$list</span><span>,</span> <span>count</span><span>(</span><span>$list</span><span>)</span> <span>/</span> <span>$threadNum</span><span>)</span><span>;</span>
	<span>foreach</span> <span>(</span><span>$list</span> <span>as</span> <span>$key</span> <span>=></span> <span>$item</span><span>)</span> <span>{</span>
		<span>$parameters</span><span>[</span><span>'list'</span><span>]</span> <span>=</span> <span>$item</span><span>;</span>
		<span>$parameters</span><span>[</span><span>'threadNum'</span><span>]</span> <span>=</span> <span>$key</span><span>;</span>
		<span>$threads</span><span>[</span><span>$key</span><span>]</span> <span>=</span> <span>(</span><span>new</span> <span><span>\</span>parallel<span>\</span>Runtime</span><span>(</span><span>$path</span><span>)</span><span>)</span><span>-></span><span>run</span><span>(</span><span>$producer</span><span>,</span> <span>[</span><span>$parameters</span><span>]</span><span>)</span><span>;</span>
	<span>}</span>

	<span>while</span> <span>(</span><span>!</span><span>empty</span><span>(</span><span>$threads</span><span>)</span><span>)</span> <span>{</span>
		<span>foreach</span> <span>(</span><span>$threads</span> <span>as</span> <span>$key</span> <span>=></span> <span>&amp;</span><span>$thread</span><span>)</span> <span>{</span>
			<span>if</span> <span>(</span><span>$thread</span><span>-></span><span>done</span><span>(</span><span>)</span><span>)</span> <span>{</span> <span>// æ£€æµ‹çº¿ç¨‹çŠ¶æ€ï¼Œè¿”å›trueæ—¶çº¿ç¨‹è¿è¡Œå®Œæ¯•</span>
				<span>$result</span> <span>=</span> <span>$thread</span><span>-></span><span>value</span><span>(</span><span>)</span><span>;</span> <span>// è·å–çº¿ç¨‹å†…å‡½æ•°æ‰§è¡Œè¿”å›çš„ç»“æœ</span>
				<span>echo</span> <span>"ThreadId: <span><span>$key</span></span> => result: <span><span>{</span><span>$result</span><span>}</span></span> (End)\n"</span><span>;</span>
				<span>unset</span><span>(</span><span>$threads</span><span>[</span><span>$key</span><span>]</span><span>)</span><span>;</span>
			<span>}</span>
		<span>}</span>
		<span>sleep</span><span>(</span><span>$sleep</span><span>)</span><span>;</span>
	<span>}</span>
<span>}</span>


<span>start_threads</span><span>(</span><span>$list</span><span>,</span> <span>$producer</span><span>,</span> <span>10</span><span>,</span> <span>[</span><span>'redis'</span> <span>=></span> <span>$redis</span><span>]</span><span>,</span> <span>$path</span><span>,</span> <span>1</span><span>)</span><span>;</span>
</span></code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>tp6ç¬”è®°</title>
      <link>https://doflam-z.github.io/php/tp6.html</link>
      <guid>https://doflam-z.github.io/php/tp6.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">tp6ç¬”è®°</source>
      <pubDate>Mon, 24 Mar 2025 02:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="tp6ç¬”è®°" tabindex="-1"> tp6ç¬”è®°</h1>
<h3 id="å®‰è£…" tabindex="-1"> å®‰è£…</h3>
<p>å…ˆå®‰è£…composer</p>
<div><pre><code><span>curl</span> <span>-sS</span> https://getcomposer.org/installer <span>|</span> php
<span>mv</span> composer.phar /usr/local/bin/composer
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>å®‰è£…é¡¹ç›®</p>
<div><pre><code><span>composer</span> create-project topthink/think tp
</code></pre><div aria-hidden="true"><div></div></div></div><p>æµ‹è¯•è¿è¡Œ</p>
<div><pre><code>php think run
</code></pre><div aria-hidden="true"><div></div></div></div><p>å®‰è£…æ‰©å±•</p>
<div><pre><code><span>composer</span> require topthink/think-migration
</code></pre><div aria-hidden="true"><div></div></div></div><p>åˆ›å»ºæ–‡ä»¶</p>
<div><pre><code>php think migrate:create ArticleTable
</code></pre><div aria-hidden="true"><div></div></div></div><p>è¿›å…¥databaseç›®å½•ä¿®æ”¹ä»£ç </p>
<div><pre><code>public <span>function</span> <span>change</span><span>(</span><span>)</span>
<span>{</span>
    // create the table
    <span>$table</span>  <span>=</span>  <span>$this</span>-<span>></span>table<span>(</span><span>'article'</span><span>)</span><span>;</span>
    <span>$table</span>-<span>></span>addColumn<span>(</span><span>'title'</span>, <span>'string'</span>, <span>[</span><span>'comment'</span> <span>=</span><span>></span> <span>'æ–‡ç« æ ‡é¢˜'</span><span>]</span><span>)</span>
    -<span>></span>addColumn<span>(</span><span>'body'</span>, <span>'text'</span>, <span>[</span><span>'comment'</span> <span>=</span><span>></span> <span>'æ–‡ç« å†…å®¹'</span><span>]</span><span>)</span>
    -<span>></span>addTimestamps<span>(</span><span>)</span>
    -<span>></span>create<span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>è¿è¡Œå»ºè¡¨</p>
<div><pre><code>php think migrate:run
</code></pre><div aria-hidden="true"><div></div></div></div><p>ç”Ÿæˆæ§åˆ¶å™¨ã€æ¨¡å‹</p>
<div><pre><code> php think make:controller index@Demo 
 php think make:model Demo
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>å®‰è£…åŒ…</p>
<div><pre><code>composer install --ignore-platform-reqs
</code></pre><div aria-hidden="true"><div></div></div></div><h4 id="å¤šåº”ç”¨" tabindex="-1"> å¤šåº”ç”¨</h4>
<p>å®‰è£…å¤šåº”ç”¨æ‰©å±•ï¼Œåˆ›å»ºåº”ç”¨ç›®å½•</p>
<div><pre><code><span>composer</span> require topthink/think-multi-app 
php think build adimn
</code></pre><div aria-hidden="true"><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Pythonç¬”è®°</title>
      <link>https://doflam-z.github.io/python/Python.html</link>
      <guid>https://doflam-z.github.io/python/Python.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">Pythonç¬”è®°</source>
      <pubDate>Mon, 24 Mar 2025 02:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="pythonç¬”è®°" tabindex="-1"> Pythonç¬”è®°</h1>
<h3 id="pipå¯¼å‡ºã€å®‰è£…ä¾èµ–" tabindex="-1"> PIPå¯¼å‡ºã€å®‰è£…ä¾èµ–</h3>
<blockquote>
<p>pipä¿®æ”¹è½¯ä»¶æºä¸ºæ¸…åæºï¼Œpip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</p>
</blockquote>
<div><pre><code>pip freeze <span>></span> requirements.txt
pip <span>install</span> <span>-r</span> requirements.txt
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><h3 id="ä½¿ç”¨-pyenv-å®‰è£…ç®¡ç†å¤šä¸ª-pythonç‰ˆæœ¬" tabindex="-1"> ä½¿ç”¨ pyenv å®‰è£…ç®¡ç†å¤šä¸ª Pythonç‰ˆæœ¬</h3>
<p><strong>pyenv çš„ä½œç”¨</strong></p>
<p>pyenv æ˜¯ä¸€ä¸ª <strong>Python ç‰ˆæœ¬ç®¡ç†å·¥å…·</strong>ï¼Œå¯ä»¥è®©ä½ è½»æ¾åœ°åœ¨åŒä¸€å°æœºå™¨ä¸Šå®‰è£…å’Œåˆ‡æ¢å¤šä¸ª Python ç‰ˆæœ¬ï¼Œè€Œä¸ä¼šå½±å“ç³»ç»Ÿè‡ªå¸¦çš„ Pythonã€‚</p>
<p><strong>ğŸ’¡ pyenv èƒ½åšä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>1ï¸âƒ£ åœ¨åŒä¸€å°ç”µè„‘ä¸Šå®‰è£…å¤šä¸ª Python ç‰ˆæœ¬</strong></p>
<p>æ¯”å¦‚ä½ çš„ç³»ç»Ÿé»˜è®¤æ˜¯ Python 3.8ï¼Œä½†ä½ æƒ³åœ¨ä¸åŒé¡¹ç›®ä¸­ä½¿ç”¨ Python 3.10 æˆ– 3.12ï¼Œå°±å¯ä»¥ç”¨ pyenv è½»æ¾ç®¡ç†ï¼š</p>
<div><pre><code>pyenv install 3.10.13
pyenv install 3.12.1
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p><strong>2ï¸âƒ£ è®©ä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ Python ç‰ˆæœ¬</strong></p>
<p>ä½ å¯ä»¥ä¸ºæ¯ä¸ªé¡¹ç›®æŒ‡å®šä¸åŒçš„ Python ç‰ˆæœ¬ï¼Œé¿å…å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<div><pre><code>cd my_project
pyenv local 3.10.13  # è¿™ä¸ªé¡¹ç›®ç”¨ Python 3.10
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>å¦ä¸€ä¸ªé¡¹ç›®å¯ä»¥ä½¿ç”¨ Python 3.12ï¼š</p>
<div><pre><code>cd another_project
pyenv local 3.12.1  # è¿™ä¸ªé¡¹ç›®ç”¨ Python 3.12
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>è¿™æ ·ï¼Œæ¯ä¸ªé¡¹ç›®çš„ Python ç‰ˆæœ¬éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</p>
<p><strong>3ï¸âƒ£ æ›¿æ¢ç³»ç»Ÿé»˜è®¤çš„ Python</strong></p>
<p>åœ¨ä¸æ”¹åŠ¨ç³»ç»Ÿè‡ªå¸¦ Python çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è‡ªå·±å®‰è£…çš„ Python ç‰ˆæœ¬ï¼š</p>
<div><pre><code>pyenv global 3.12.1  # è®©æ•´ä¸ªç”¨æˆ·ç¯å¢ƒé»˜è®¤ä½¿ç”¨ Python 3.12.1
</code></pre><div aria-hidden="true"><div></div></div></div><p>å¦‚æœæƒ³æ¢å¤ç³»ç»Ÿé»˜è®¤çš„ Pythonï¼š</p>
<div><pre><code>pyenv global system
</code></pre><div aria-hidden="true"><div></div></div></div><p><strong>4ï¸âƒ£ è§£å†³ sudo apt install python3-distutils æ‰¾ä¸åˆ°çš„é—®é¢˜</strong></p>
<p>æœ‰æ—¶å€™ Ubuntu å®˜æ–¹çš„è½¯ä»¶åº“æ²¡æœ‰æä¾›æœ€æ–°çš„ Python ç‰ˆæœ¬æˆ–è€…æŸäº›ç»„ä»¶ï¼ˆå¦‚ distutilsï¼‰ã€‚ç”¨ pyenv å®‰è£… Python å¯ä»¥ç»•å¼€è¿™ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<div><pre><code>pyenv install 3.11.6  # å®‰è£… Python 3.11.6
pyenv global 3.11.6  # è®¾ä¸ºé»˜è®¤ Python ç‰ˆæœ¬
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>ç„¶åä½ å°±å¯ä»¥ä½¿ç”¨ pip æ­£å¸¸å®‰è£… lxml äº†ï¼š</p>
<div><pre><code>pip install lxml
</code></pre><div aria-hidden="true"><div></div></div></div><hr>
<p><strong>ğŸš€ pyenv å®‰è£… &amp; ä½¿ç”¨</strong></p>
<p><strong>1ï¸âƒ£ å®‰è£… pyenv</strong></p>
<p><strong>ğŸ”¹ Ubuntu / Debian</strong></p>
<div><pre><code><span>curl</span> https://pyenv.run <span>|</span> <span>bash</span>

<span>#å¦‚æœgithubæ— æ³•è®¿é—®ï¼Œå¯ä»¥å»giteeä¸Šæ‰¾pyenvçš„é•œåƒï¼Œcloneåˆ°æœ¬åœ°</span>
<span>git</span> clone https://gitee.com/mouday/pyenv.git ~/.pyenv
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>ç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹åˆ° ~/.bashrc æˆ– ~/.bash_profileï¼š</p>
<div><pre><code>export PATH="$HOME/.pyenv/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv virtualenv-init -)"
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>ç„¶åè¿è¡Œï¼š</p>
<div><pre><code>exec $SHELL  # é‡æ–°åŠ è½½ shell
</code></pre><div aria-hidden="true"><div></div></div></div><p><strong>ğŸ”¹ Macï¼ˆä½¿ç”¨ Homebrew å®‰è£…ï¼‰</strong></p>
<div><pre><code>brew install pyenv
echo 'eval "$(pyenv init --path)"' >> ~/.zshrc
source ~/.zshrc
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p><strong>2ï¸âƒ£ ä½¿ç”¨ pyenv å®‰è£… Python</strong></p>
<div><pre><code><span># å®‰è£…pythonå¼€å‘åº“</span>
<span>sudo</span> yum <span>install</span> libffi-devel
pyenv <span>install</span> <span>3.12</span>.1 
pyenv global <span>3.12</span>.1 <span># å…¨å±€ä½¿ç”¨</span>
pyenv <span>local</span> <span>3.12</span>.1 <span># å½“å‰é¡¹ç›®ä½¿ç”¨</span>
python <span>--version</span>  <span># ç¡®ä¿ä½¿ç”¨çš„æ˜¯ pyenv ç‰ˆæœ¬</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p><strong>ğŸ› ï¸ æ€»ç»“</strong></p>
<p>ğŸ”¹ <strong>pyenv = Python ç‰ˆæœ¬ç®¡ç†å™¨</strong>ï¼Œè®©ä½ å¯ä»¥å®‰è£…ã€åˆ‡æ¢å¤šä¸ª Python ç‰ˆæœ¬ã€‚</p>
<p>ğŸ”¹ <strong>é¿å…ç ´åç³»ç»Ÿ Python</strong>ï¼Œä¸ä¼šå½±å“ apt æˆ– yum ç®¡ç†çš„ Pythonã€‚</p>
<p>ğŸ”¹ <strong>è§£å†³ä¾èµ–é—®é¢˜</strong>ï¼Œå¦‚ distutils ç¼ºå¤±ã€pip ç‰ˆæœ¬å†²çªç­‰ã€‚</p>
<p>ğŸ”¹ <strong>æ¯ä¸ªé¡¹ç›®å¯ä»¥æœ‰è‡ªå·±çš„ Python ç‰ˆæœ¬</strong>ï¼Œé¿å…ä¸åŒ Python ç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<h3 id="python-ç¼–è¯‘ç¼ºå¤±äº†å¤šä¸ªé‡è¦æ¨¡å—" tabindex="-1"> Python ç¼–è¯‘ç¼ºå¤±äº†å¤šä¸ªé‡è¦æ¨¡å—</h3>
<blockquote>
<p>Python ç¼–è¯‘ç¼ºå¤±äº†å¤šä¸ªé‡è¦æ¨¡å—ï¼ŒåŒ…æ‹¬ _cursesï¼ˆncursesï¼‰ã€readlineï¼ˆGNU Readlineï¼‰ã€_sqlite3ï¼ˆSQLite3ï¼‰å’Œ _lzmaï¼ˆLZMAï¼‰ã€‚è¿™äº›é—®é¢˜é€šå¸¸æ˜¯å› ä¸ºç¼ºå°‘å¿…è¦çš„ ç³»ç»Ÿä¾èµ–ï¼Œæ‰€ä»¥ä½ éœ€è¦å®‰è£…å®ƒä»¬åé‡æ–°ç¼–è¯‘ Pythonã€‚</p>
</blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
<ol>
<li>å®‰è£…ç¼ºå¤±çš„ç³»ç»Ÿä¾èµ–</li>
</ol>
<p>åœ¨ Ubuntu/Debian ä¸Šè¿è¡Œï¼š</p>
<div><pre><code><span>sudo</span> <span>apt</span> update <span>&amp;&amp;</span> <span>sudo</span> <span>apt</span> <span>install</span> <span>-y</span> <span>\</span>
    libbz2-dev <span>\</span>
    liblzma-dev <span>\</span>
    libsqlite3-dev <span>\</span>
    libncurses5-dev <span>\</span>
    libncursesw5-dev <span>\</span>
    libreadline-dev <span>\</span>
    xz-utils <span>\</span>
    tk-dev
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>åœ¨ CentOS/RHEL ä¸Šï¼š</p>
<div><pre><code><span>sudo</span> yum <span>install</span> <span>-y</span> <span>\</span>
    bzip2-devel <span>\</span>
    xz-devel <span>\</span>
    sqlite-devel <span>\</span>
    ncurses-devel <span>\</span>
    readline-devel <span>\</span>
    xz <span>\</span>
    tk-devel
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>å¼ºåˆ¶é‡æ–°ç¼–è¯‘ Python</li>
</ol>
<p>å®‰è£…å®Œä¾èµ–åï¼Œé‡æ–°ç¼–è¯‘ Pythonï¼š</p>
<div><pre><code><span>CFLAGS</span><span>=</span><span>"-I/usr/include -I/usr/include/bz2 -I/usr/include/lzma -I/usr/include/ncurses -I/usr/include/readline -I/usr/include/sqlite3"</span> <span>\</span>
pyenv <span>install</span> <span>3.9</span>.7 <span>--force</span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><ol start="3">
<li>æ¿€æ´» Python å¹¶æ£€æŸ¥æ¨¡å—</li>
</ol>
<p>å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥ Python æ˜¯å¦æ­£ç¡®ç¼–è¯‘äº†æ‰€æœ‰æ¨¡å—ï¼š</p>
<div><pre><code>pyenv <span>local</span> <span>3.9</span>.7

python3 <span>-c</span> <span>"import bz2, lzma, sqlite3, readline, curses"</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼</p>
<h3 id="å®‰è£…virtualenvè™šæ‹Ÿç¯å¢ƒ" tabindex="-1"> å®‰è£…virtualenvè™šæ‹Ÿç¯å¢ƒ</h3>
<p>å®‰è£…virtualenv</p>
<div><pre><code>pip3 <span>install</span> virtualenv
</code></pre><div aria-hidden="true"><div></div></div></div><p>åˆ›å»ºé¡¹ç›®ç›®å½•appåŒæ—¶åˆ›å»ºä¸€ä¸ªåä¸ºvenvçš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿›å…¥ç¯å¢ƒ</p>
<div><pre><code><span>#mac</span>
pip <span>install</span> virtualenv
python3 <span>-m</span> venv venv
<span>source</span> venv/bin/activate

<span>#win</span>
<span>#æ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥ Set-ExecutionPolicy RemoteSigned</span>
pip <span>install</span> virtualenv
pip <span>install</span> virtualenvwrapper
<span>cd</span> app
virtualenv venv
<span>#è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span>
.<span>\</span>venv<span>\</span>Scripts<span>\</span>activate
<span>#ç¦»å¼€è™šæ‹Ÿç¯å¢ƒ</span>
.<span>\</span>venv<span>\</span>Scripts<span>\</span>deactivate
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</p>
<div><pre><code>deactivate
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="å®‰è£…scrapy" tabindex="-1"> å®‰è£…Scrapy</h3>
<div><pre><code><span>#å…ˆå®‰è£…ä¾èµ–</span>
pip <span>install</span> wheel lxml pyOpenSSL Twisted
pip <span>install</span> <span>install</span> Scrapy

<span># æˆ–è€…ç›´æ¥å¯¼å…¥ä¾èµ–æ–‡æœ¬</span>
pip <span>install</span> <span>-r</span> requirements.txt

<span>#åˆ›å»ºé¡¹ç›®</span>
scrapy startproject tutorial

<span>#åˆ›å»ºç¬¬ä¸€ä¸ªçˆ¬è™«æ–‡ä»¶ï¼ŒæŒ‡å®šåŸŸå</span>
scrapy genspider zhipin <span>"zhipin.com"</span>

<span>#åˆ›å»ºä¸€ä¸ªXMLFeedSpiderçˆ¬è™«æ–‡ä»¶</span>
scrapy genspider <span>-t</span> xmlfeed lagou lagou.com

<span>#è¿è¡Œä¸€ä¸ªçˆ¬è™«ç¨‹åºï¼Œè¾“å‡ºåˆ°æ–‡ä»¶</span>
scrapy crawl mininova <span>-o</span> scraped_data.json 

<span>#è¿è¡Œä¸€ä¸ªçˆ¬è™«ç¨‹åºï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šç›®å½•</span>
scrpay crawl spider_name  <span>-s</span> <span>LOG_FILE</span><span>=</span>all.log

<span>#é…ç½®æ–‡ä»¶settings.py</span>
<span>#å¼€å¯ä¸‹è½½å™¨ä¸­é—´ä»¶ï¼Œæ•°å€¼è¶Šå°è¶Šæ¥è¿‘æ§åˆ¶å™¨</span>
DOWNLOADER_MIDDLEWARES <span>=</span> <span>{</span>
    <span>'companyProfile.middlewares.CompanyprofileDownloaderMiddleware'</span><span>:</span> None,
    <span>'companyProfile.middlewares.AgentDownloaderMiddleware'</span><span>:</span> <span>543</span>,
    <span>'companyProfile.middlewares.SeleniumDownloaderMiddleware'</span><span>:</span> <span>643</span>,
<span>}</span>

<span>#å¼€å¯ç®¡é“</span>
ITEM_PIPELINES <span>=</span> <span>{</span>
   <span>'companyProfile.pipelines.CompanyprofilePipeline'</span><span>:</span> <span>300</span>,
<span>}</span>


</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="seleniuméœ€è¦chromeé©±åŠ¨" tabindex="-1"> seleniuméœ€è¦chromeé©±åŠ¨</h3>
<div><pre><code><span># å®‰è£…chrome</span>
<span>sudo</span> <span>wget</span> https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
<span>sudo</span> <span>apt</span> <span>install</span> ./google-chrome-stable_current_amd64.deb
<span># ä¸‹è½½é©±åŠ¨</span>
<span>sudo</span> <span>wget</span> https://chromedriver.storage.googleapis.com/101.0.4951.41/chromedriver_linux64.zip
<span># è§£å‹ç›´æ¥ä½¿ç”¨</span>
<span>sudo</span> <span>unzip</span> chromedriver_linux64.zip
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="å®‰è£…çˆ¬è™«éœ€è¦çš„åº“" tabindex="-1"> å®‰è£…çˆ¬è™«éœ€è¦çš„åº“</h3>
<div><pre><code> pip <span>install</span> beautifulsoup4 
 pip <span>install</span> requests
 pip <span>install</span> selenium
 pip <span>install</span> fake-useragent
 pip <span>install</span> redis
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="å®‰è£…mysql-peewee-ormåº“" tabindex="-1"> å®‰è£…mysql peewee ORMåº“</h3>
<div><pre><code>pip <span>install</span> pymysql
pip <span>install</span> peewee
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><h5 id="peeweeç”Ÿæˆmoduleæ–‡ä»¶" tabindex="-1"> peeweeç”Ÿæˆmoduleæ–‡ä»¶</h5>
<div><pre><code>python <span>-m</span> pwiz <span>-e</span> mysql <span>-H</span> localhost <span>-p</span> <span>3306</span> <span>-u</span> æ•°æ®åº“ç”¨æˆ·å <span>-P</span> æ•°æ®åº“å¯†ç  <span>-t</span> è¡¨å<span>(</span>table name<span>)</span> åº“å<span>(</span>database name<span>)</span> <span>></span> è¦ç”Ÿæˆçš„pythonæ–‡ä»¶åç§°.py
python <span>-m</span> pwiz <span>-e</span> mysql <span>-H</span> <span>192.168</span>.1.14 <span>-p</span> <span>3306</span> <span>-u</span> jobSnatch_r <span>-P</span> <span>-t</span> tb_company_info jobui_snatch_company <span>></span> tb_company_info.py

python <span>-m</span> pwiz <span>-e</span> mysql <span>-H</span> <span>192.168</span>.1.14 <span>-p</span> <span>3306</span> <span>-u</span> jobSnatch_r <span>-P</span> <span>-t</span> tb_company_content jobui_snatch_company <span>></span> tb_company_info.py

python <span>-m</span> pwiz <span>-e</span> mysql <span>-H</span> <span>121.9</span>.201.145 <span>-p</span> <span>3307</span> <span>-u</span> jobSnatch_w <span>-P</span> <span>-t</span> tb_company_status jobui_snatch_company <span>></span> tb_company_status.py
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>ç”Ÿæˆçš„æ–‡ä»¶éœ€è¦è½¬æˆutf-8æ–‡ä»¶æ ¼å¼</p>
<div><pre><code>database = MySQLDatabase('jobui_snatch_company', host="192.168.1.14", user='jobSnatch_r', passwd='j89#do@k', port=3306)
</code></pre><div aria-hidden="true"><div></div></div></div><div><pre><code>database = MySQLDatabase('jobui_snatch_company', host="192.168.1.14", user='jobSnatch_r', passwd='j89#do@k', port=3306)
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="å®‰è£…mongodb-ormåº“" tabindex="-1"> å®‰è£…mongodb ORMåº“</h3>
<div><pre><code><span>#å®‰è£…pymongo3.12.3ï¼Œæœ€æ–°ç‰ˆæœ¬éªŒè¯ä¼šæŠ¥é”™</span>
pip install  pymongo<span>==</span><span>3.12</span><span>.3</span>
<span>#å®‰è£…MongoEngine</span>
python <span>-</span>m pip install mongoengine

<span>#è¿æ¥</span>
<span>from</span> mongoengine <span>import</span> <span>*</span>
<span>from</span> env <span>import</span> <span>*</span>

db <span>=</span> <span>'jobui_tmp'</span>
config <span>=</span> Env<span>.</span>get_db_config<span>(</span>db<span>)</span>
connect<span>(</span>db<span>,</span> <span>**</span>config<span>)</span>


<span>class</span> <span>CompanyProfile</span><span>(</span>Document<span>)</span><span>:</span>
    _id <span>=</span> IntField<span>(</span>primary_key<span>=</span><span>True</span><span>)</span>  <span># å…¬å¸id</span>
    name <span>=</span> StringField<span>(</span><span>)</span>  <span># å…¬å¸å</span>
    domain <span>=</span> StringField<span>(</span><span>)</span>  <span># æ¥æºç½‘å€</span>
    content <span>=</span> StringField<span>(</span><span>)</span>  <span># å…¬å¸ä»‹ç»</span>

    meta <span>=</span> <span>{</span>
        <span>'indexes'</span><span>:</span> <span>[</span>  <span># å»ºç´¢å¼•</span>
            <span>'name'</span><span>,</span>
            <span>'domain'</span><span>,</span>
            <span>'content'</span>
        <span>]</span>
    <span>}</span>

<span>##å¦‚æœæœ‰ä¸»é”®å­—æ®µï¼Œåˆ™ä¸»é”®å­—æ®µä¸èƒ½è®¾ç½®ä¸ºAutoFieldç±»å‹ï¼Œä¼šå¯¼è‡´æ’å…¥è¯­å¥å¼‚å¸¸</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>shell</title>
      <link>https://doflam-z.github.io/linux/shell.html</link>
      <guid>https://doflam-z.github.io/linux/shell.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">shell</source>
      <pubDate>Fri, 21 Mar 2025 02:03:08 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="shell" tabindex="-1"> shell</h1>
<h3 id="æŸ¥çœ‹ç³»ç»Ÿå½“å‰ä½¿ç”¨çš„shellã€æŸ¥çœ‹ç³»ç»Ÿæœ‰å“ªäº›shell" tabindex="-1"> æŸ¥çœ‹ç³»ç»Ÿå½“å‰ä½¿ç”¨çš„shellã€æŸ¥çœ‹ç³»ç»Ÿæœ‰å“ªäº›shell</h3>
<div><pre><code><span>echo</span> <span>$SHELL</span>
<span>cat</span> /etc/shells
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><h3 id="å®‰è£…zsh" tabindex="-1"> å®‰è£…zsh</h3>
<div><pre><code><span>sudo</span> <span>apt</span> <span>install</span> <span>zsh</span> <span>-y</span>
</code></pre><div aria-hidden="true"><div></div></div></div><blockquote>
<p>è®¾ç½®ä¸ºé»˜è®¤shell</p>
</blockquote>
<div><pre><code>chsh <span>-s</span> /bin/zsh
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="å®‰è£…oh-my-zsh" tabindex="-1"> å®‰è£…oh my zsh</h3>
<div><pre><code><span>sh</span> <span>-c</span> <span>"<span><span>$(</span><span>curl</span> <span>-fsSL</span> https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span>)</span></span>"</span>
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="é…ç½®ä¸»é¢˜" tabindex="-1"> é…ç½®ä¸»é¢˜</h3>
<blockquote>
<p>å°† <code>ZSH_THEME=&quot;robbyrussell&quot;</code> ä¿®æ”¹ä¸º <code>ZSH_THEME=&quot;ys&quot;</code> ï¼Œysè¿™ä¸ªä¸»é¢˜æ¯”è¾ƒç®€çº¦,ä¿®æ”¹ä¹‹åé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ <code>source ~/.zshrc</code>ä¸»é¢˜é“¾æ¥https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</p>
</blockquote>
<p>å®‰è£… <strong>Oh My Zsh</strong>ï¼ˆæ¨èï¼‰</p>
<div><pre><code>sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
</code></pre><div aria-hidden="true"><div></div></div></div><p>ä¸‹è½½ Powerlevel10k ä¸»é¢˜ï¼š</p>
<div><pre><code>git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k
</code></pre><div aria-hidden="true"><div></div></div></div><p>ç¼–è¾‘ ~/.zshrc æ–‡ä»¶ï¼š</p>
<div><pre><code>ZSH_THEME="powerlevel10k/powerlevel10k"
</code></pre><div aria-hidden="true"><div></div></div></div><p>é‡æ–°åŠ è½½é…ç½®ï¼š</p>
<div><pre><code>source ~/.zshrc
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="å®‰è£…æ’ä»¶" tabindex="-1"> å®‰è£…æ’ä»¶</h3>
<blockquote>
<p>å®‰è£…å‘½ä»¤è¡¥å…¨ã€å‘½ä»¤é«˜äº®æ˜¾ç¤ºæ’ä»¶</p>
</blockquote>
<p>ä¸‹è½½</p>
<div><pre><code><span>git</span> clone https://github.com/zsh-users/zsh-autosuggestions <span>${ZSH_CUSTOM<span>:-</span>$HOME<span>/</span>.oh-my-zsh<span>/</span>custom}</span>/plugins/zsh-autosuggestions

<span>git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting <span>${ZSH_CUSTOM<span>:-</span>~<span>/</span>.oh-my-zsh<span>/</span>custom}</span>/plugins/zsh-syntax-highlighting
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>å¼€å¯</p>
<div><pre><code><span>vi</span> ~/.zshrc
<span># å¼€å¯æ’ä»¶</span>
<span>plugins</span><span>=</span><span>(</span>git z zsh-syntax-highlighting zsh-autosuggestions<span>)</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>Jenkins</title>
      <link>https://doflam-z.github.io/services/jenkins.html</link>
      <guid>https://doflam-z.github.io/services/jenkins.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">Jenkins</source>
      <pubDate>Fri, 03 Jan 2025 03:01:21 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="jenkins" tabindex="-1"> Jenkins</h1>
<p>Job Pll</p>
<div><pre><code><span>#!/bin/bash</span>

<span>jobuiphpdir</span><span>=</span><span>"jobuiV4 baseClassV4 Thrift captcha"</span>
<span>jobuihtmldir</span><span>=</span><span>"jobuiV4_html"</span>

<span>cd</span> /web/software/jenkins/workspace/jobui

<span>#æ›´æ–°æœ¬åœ°ä»“åº“åˆ°æœ€æ–°æ”¹åŠ¨</span>
<span>process</span><span>=</span><span><span>`</span>pgrep <span>git</span><span>`</span></span>
<span>echo</span> <span>"###################"</span> <span>>></span> /tmp/coding.log
<span>date</span> <span>"+%Y%m%d %H:%M:%S"</span> <span>>></span> /tmp/coding.log
<span>#åˆ¤æ–­git pullè¿›ç¨‹æ˜¯å¦å­˜åœ¨</span>
<span>if</span> <span>[</span> <span>-n</span> <span>"<span>$process</span>"</span> <span>]</span><span>;</span><span>then</span>
        <span>echo</span> <span>"git pull is exist"</span> <span>>></span> /tmp/coding.log
        <span>exit</span>
<span>fi</span>
<span>git</span> pull origin master <span>>></span> /tmp/coding.log  <span><span>2</span>></span><span>&amp;1</span> <span>&amp;</span>

<span>sleep</span> <span>1</span>

<span>#åˆ¤æ–­git pullå‘½ä»¤æ˜¯å¦è¿è¡Œå®Œæˆ</span>
<span>while</span> <span>true</span>
<span>do</span>
        <span>process</span><span>=</span><span><span>`</span>pgrep <span>git</span><span>`</span></span>
        <span>#[ -n str] å½“å­—ç¬¦ä¸²é•¿åº¦å¤§äº0è¿”å›çœŸ </span>
        <span>if</span> <span>[</span> <span>-n</span> <span>"<span>$process</span>"</span> <span>]</span><span>;</span> <span>then</span>
        <span>echo</span> <span>"git pull is running"</span> <span>>></span> /tmp/coding.log
        <span>sleep</span> <span>2</span>
<span>else</span>
        <span>echo</span> <span>"git pull is over"</span> <span>>></span> /tmp/coding.log
        <span>break</span>
        <span>fi</span>
<span>done</span>


<span>if</span> <span>[</span> <span>"<span>$USER</span>"</span> <span>=</span> <span>"jobui"</span> <span>]</span><span>;</span><span>then</span>
    <span>for</span> <span>jpdir</span> <span>in</span> <span>$jobuiphpdir</span>
    <span>do</span>
        <span>if</span> <span>[</span> <span>!</span> <span>-z</span> <span>"<span>$jpdir</span>"</span> <span>]</span> <span>;</span><span>then</span>
            <span>echo</span> <span>-e</span> <span>"<span title="\n">\n</span>-------------------- /projectPHP/<span>$jpdir</span> çš„åŒæ­¥å†…å®¹å¦‚ä¸‹ --------------------<span title="\n">\n</span>"</span>
            <span>rsync</span> <span>-av</span> <span>--delete</span> --exclude-from<span>=</span>/web/software/jenkins/workspace/jobui/.gitignore <span>$jpdir</span> /web/php/projectPHP/
        <span>fi</span>
    <span>done</span>

    <span>for</span> <span>jhdir</span> <span>in</span> <span>$jobuihtmldir</span>
    <span>do</span>
        <span>if</span> <span>[</span> <span>!</span> <span>-z</span> <span>"<span>$jhdir</span>"</span> <span>]</span> <span>;</span><span>then</span>
            <span>echo</span> <span>-e</span> <span>"<span title="\n">\n</span>-------------------- /projectHTML/<span>$jhdir</span> çš„åŒæ­¥å†…å®¹å¦‚ä¸‹ --------------------<span title="\n">\n</span>"</span>
            <span>rsync</span> <span>-av</span> <span>--delete</span> --exclude-from<span>=</span>/web/software/jenkins/workspace/jobui/.gitignore <span>$jhdir</span> /web/php/projectHTML/
        <span>fi</span>
    <span>done</span>
<span>else</span>
    <span>echo</span> <span>"you are <span>$USER</span> not jobui,change to the user and run it <span title="\n">\n</span>"</span>
    <span>exit</span>
<span>fi</span>

<span>#rm -rf /dev/shm/nginx-data/proxy_cache_dir/*</span>

<span>exit</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>Jobui pub</p>
<div><pre><code><span>#!/bin/bash</span>

<span>jobuiphpdir</span><span>=</span><span>"jobuiV4 baseClassV4 captcha"</span>
<span>jobuihtmldir</span><span>=</span><span>"jobuiV4_html"</span>

<span>time</span><span>=</span><span><span>`</span><span>date</span><span>`</span></span>
<span>echo</span> <span>"start at <span>$time</span> ######################<span title="\n">\n</span>"</span>
<span>echo</span> <span>"####### rsync jobui start #######<span title="\n">\n</span>"</span>

<span>ip</span><span>=</span><span>"132 133 134 135 136 137 138 141 144"</span>

<span>for</span> <span>var</span> <span>in</span> <span>$ip</span>
<span>do</span>
    <span>echo</span> <span>-e</span> <span>"<span title="\n">\n</span><span title="\n">\n</span>=======================================<span title="\n">\n</span>jobuiV4åŒæ­¥ç›®æ ‡æœºå™¨:192.168.2.<span>$var</span> <span title="\n">\n</span>"</span>
    <span>cd</span> /web/php/projectPHP
    <span>for</span> <span>jpdir</span> <span>in</span> <span>$jobuiphpdir</span>
    <span>do</span>
        <span>echo</span> <span>-e</span> <span>"<span title="\n">\n</span>-------------------- /projectPHP/<span>$jpdir</span> åŒæ­¥å¼€å§‹ --------------------<span title="\n">\n</span>"</span>
        <span>if</span> <span>[</span> <span>!</span> <span>-z</span> <span>"<span>$jpdir</span>"</span> <span>]</span> <span>;</span><span>then</span>
                <span>rsync</span> <span>-av</span>  <span>--delete</span> <span>$jpdir</span> <span>'-e ssh -p 60011'</span> jobui@192.168.2.<span>$var</span>:/web/php/projectPHP/ <span>>></span> /tmp/jobui_rxync_remote.log
        <span>fi</span>
    <span>done</span>
    <span>cd</span> /web/php/projectHTML
    <span>for</span> <span>jhdir</span> <span>in</span> <span>$jobuihtmldir</span>
    <span>do</span>
        <span>echo</span> <span>-e</span> <span>"<span title="\n">\n</span><span title="\n">\n</span>------------------ /projectHTML/<span>$jhdir</span> åŒæ­¥å¼€å§‹ --------------------<span title="\n">\n</span>"</span>
        <span>if</span> <span>[</span> <span>!</span> <span>-z</span> <span>"<span>$jhdir</span>"</span> <span>]</span> <span>;</span><span>then</span>
                <span>rsync</span> <span>-av</span>  <span>--delete</span> <span>$jhdir</span> <span>'-e ssh -p 60011'</span> jobui@192.168.2.<span>$var</span>:/web/php/projectHTML/ <span>>></span> /tmp/jobui_rxync_remote.log
        <span>fi</span>
    <span>done</span>
<span>done</span>
<span>echo</span> <span>"####### rsync jobui end #######"</span>
<span>exit</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content:encoded>
    </item>
    <item>
      <title>network</title>
      <link>https://doflam-z.github.io/linux/network.html</link>
      <guid>https://doflam-z.github.io/linux/network.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">network</source>
      <pubDate>Mon, 26 Feb 2024 10:08:55 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="network" tabindex="-1"> network</h1>
<blockquote>
<p>ç½‘ç»œç›¸å…³å‘½ä»¤</p>
</blockquote>
<h3 id="æŸ¥çœ‹ç½‘ç»œå®æ—¶æµé‡" tabindex="-1"> æŸ¥çœ‹ç½‘ç»œå®æ—¶æµé‡</h3>
<div><pre><code><span>sudo</span> iftop <span>-i</span> eno3
</code></pre><div aria-hidden="true"><div></div></div></div><blockquote>
<p>-i æŒ‡å®šç½‘å¡</p>
</blockquote>
<h3 id="æŸ¥çœ‹tcpã€udpè¿æ¥æ•°" tabindex="-1"> æŸ¥çœ‹tcpã€udpè¿æ¥æ•°</h3>
<div><pre><code><span>sudo</span> <span>netstat</span> <span>-an</span> <span>|</span> <span>grep</span> tcp <span>|</span> <span>wc</span> <span>-l</span>
<span>sudo</span> <span>netstat</span> <span>-anu</span> <span>|</span> <span>grep</span> udp <span>|</span> <span>wc</span> <span>-l</span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><blockquote>
<p>è¿™ä¸ªå‘½ä»¤çš„å«ä¹‰æ˜¯ï¼š</p>
<ul>
<li><code>netstat -an</code>ï¼šåˆ—å‡ºç³»ç»Ÿä¸Šçš„æ‰€æœ‰ç½‘ç»œè¿æ¥ï¼ŒåŒ…æ‹¬ TCP å’Œ UDP è¿æ¥ã€‚</li>
<li><code>grep tcp</code>ï¼šç­›é€‰å‡º TCP è¿æ¥çš„è¡Œã€‚</li>
<li><code>wc -l</code>ï¼šå¯¹ç­›é€‰åçš„è¡Œæ•°è¿›è¡Œç»Ÿè®¡ï¼Œå³è®¡ç®— TCP è¿æ¥çš„æ•°é‡</li>
</ul>
</blockquote>
<h3 id="æŸ¥çœ‹tcpé”™è¯¯æ•°" tabindex="-1"> æŸ¥çœ‹tcpé”™è¯¯æ•°</h3>
<div><pre><code><span>sudo</span> <span>netstat</span> <span>-s</span> <span>|</span> <span>grep</span> <span>-i</span> error
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="æŠ“åŒ…åˆ°æŒ‡å®šç«¯å£çš„æ•°æ®åŒ…" tabindex="-1"> æŠ“åŒ…åˆ°æŒ‡å®šç«¯å£çš„æ•°æ®åŒ…</h3>
<div><pre><code><span>sudo</span> tcpdump <span>-i</span> eno3 <span>-nn</span> <span>-vvv</span> <span>'host 192.168.2.134 and port 12000'</span>
</code></pre><div aria-hidden="true"><div></div></div></div><blockquote>
<p>è¿™ä¸ªå‘½ä»¤çš„å«ä¹‰æ˜¯ï¼š</p>
<ul>
<li><code>-i &lt;interface&gt;</code>ï¼šæŒ‡å®šç›‘è§†çš„ç½‘ç»œæ¥å£ã€‚</li>
<li><code>-nn</code>ï¼šç¦ç”¨åŸŸåè§£æï¼Œæ˜¾ç¤ºIPåœ°å€è€Œä¸æ˜¯ä¸»æœºåã€‚</li>
<li><code>-vvv</code>ï¼šå¢åŠ è¯¦ç»†çº§åˆ«ï¼Œæ˜¾ç¤ºæ›´å¤šçš„ä¿¡æ¯ã€‚</li>
<li><code>'host &lt;host_ip&gt; and port &lt;port&gt;'</code>ï¼šè¿‡æ»¤å‡ºæŒ‡å®šä¸»æœºå’Œç«¯å£çš„æµé‡</li>
</ul>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>vim</title>
      <link>https://doflam-z.github.io/linux/vim.html</link>
      <guid>https://doflam-z.github.io/linux/vim.html</guid>
      <source url="https://doflam-z.github.io/rss.xml">vim</source>
      <pubDate>Mon, 26 Feb 2024 10:08:55 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="vim" tabindex="-1"> vim</h1>
<h3 id="æŸ¥æ‰¾" tabindex="-1"> æŸ¥æ‰¾</h3>
<p>åœ¨ normal æ¨¡å¼ä¸‹æŒ‰ä¸‹ <code>/</code> å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼ï¼Œè¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å¹¶æŒ‰ä¸‹å›è½¦ã€‚ Vim ä¼šè·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚æŒ‰ä¸‹ <code>n</code> æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼ŒæŒ‰ä¸‹ <code>N</code> æŸ¥æ‰¾ä¸Šä¸€ä¸ªã€‚</p>
<p>Vim æŸ¥æ‰¾æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ <code>/vim$</code> åŒ¹é…è¡Œå°¾çš„ <code>&quot;vim&quot;</code>ã€‚ éœ€è¦æŸ¥æ‰¾ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œä¾‹å¦‚ <code>/vim\$</code> åŒ¹é… <code>&quot;vim$&quot;</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„æŸ¥æ‰¾å›è½¦åº”å½“ç”¨ <code>\n</code>ï¼Œè€Œæ›¿æ¢ä¸ºå›è½¦åº”å½“ç”¨ <code>\r</code>ï¼ˆç›¸å½“äº <code>&lt;CR&gt;</code>ï¼‰ã€‚</p>
</blockquote>
<p><strong>å…¶ä»–æŸ¥æ‰¾æ¨¡å¼</strong></p>
<ul>
<li><code>?</code>ï¼ˆæŒ‰ä½ Shift + <code>/</code>ï¼‰å¾€ä¸ŠæŸ¥æ‰¾ã€‚</li>
<li><code>q/</code> æŸ¥çœ‹æŸ¥æ‰¾å†å²ï¼Œé€‰ä¸­ä¸€é¡¹åå›è½¦å¯ä»¥é‡æ–°æŸ¥æ‰¾ã€‚</li>
<li><code>q?</code> æŸ¥çœ‹å‘ä¸ŠæŸ¥æ‰¾å†å²ã€‚</li>
</ul>
<h3 id="å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾" tabindex="-1"> å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾</h3>
<p>åœ¨æŸ¥æ‰¾æ¨¡å¼ä¸­åŠ å…¥ <code>\c</code> è¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼Œ<code>\C</code> è¡¨ç¤ºå¤§å°å†™æ•æ„ŸæŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼š</p>
<div><pre><code>/foo\c
</code></pre><div aria-hidden="true"><div></div></div></div><p>å°†ä¼šæŸ¥æ‰¾æ‰€æœ‰çš„ <code>&quot;foo&quot;</code>, <code>&quot;FOO&quot;</code>, <code>&quot;Foo&quot;</code> ç­‰å­—ç¬¦ä¸²ã€‚</p>
<h3 id="å¤§å°å†™æ•æ„Ÿé…ç½®" tabindex="-1"> å¤§å°å†™æ•æ„Ÿé…ç½®</h3>
<p>Vim é»˜è®¤é‡‡ç”¨å¤§å°å†™æ•æ„Ÿçš„æŸ¥æ‰¾ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¸¸å¸¸å°†å…¶é…ç½®ä¸ºå¤§å°å†™ä¸æ•æ„Ÿï¼š</p>
<div><pre><code>" è®¾ç½®é»˜è®¤è¿›è¡Œå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾
set ignorecase
" å¦‚æœæœ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œåˆ™åˆ‡æ¢åˆ°å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾
set smartcase 
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><blockquote>
<p>å°†ä¸Šè¿°è®¾ç½®ç²˜è´´åˆ°ä½ çš„ <code>~/.vimrc</code>ï¼Œé‡æ–°æ‰“å¼€ Vim å³å¯ç”Ÿæ•ˆã€‚</p>
</blockquote>
<h3 id="æŸ¥æ‰¾å½“å‰å•è¯" tabindex="-1"> æŸ¥æ‰¾å½“å‰å•è¯</h3>
<p>åœ¨ normal æ¨¡å¼ä¸‹æŒ‰ä¸‹ <code>*</code> å³å¯æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å•è¯ï¼ˆwordï¼‰ï¼Œ è¦æ±‚æ¯æ¬¡å‡ºç°çš„å‰åä¸ºç©ºç™½å­—ç¬¦æˆ–æ ‡ç‚¹ç¬¦å·ã€‚ä¾‹å¦‚å½“å‰ä¸º <code>foo</code>ï¼Œ å¯ä»¥åŒ¹é… <code>foo bar</code> ä¸­çš„ <code>foo</code>ï¼Œä½†ä¸å¯åŒ¹é… <code>foobar</code> ä¸­çš„ <code>foo</code>ã€‚ è¿™åœ¨æŸ¥æ‰¾å‡½æ•°åã€å˜é‡åæ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<p>æŒ‰ä¸‹ <code>g*</code> å³å¯æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å•è¯çš„å­—ç¬¦åºåˆ—ï¼Œæ¯æ¬¡å‡ºç°å‰åå­—ç¬¦æ— è¦æ±‚ã€‚ å³ <code>foo bar</code> å’Œ <code>foobar</code> ä¸­çš„ <code>foo</code> å‡å¯è¢«åŒ¹é…åˆ°ã€‚</p>
<h3 id="å…¶ä»–è®¾ç½®" tabindex="-1"> å…¶ä»–è®¾ç½®</h3>
<p><code>:set incsearch</code> å¯ä»¥åœ¨æ•²é”®çš„åŒæ—¶æœç´¢ï¼ŒæŒ‰ä¸‹å›è½¦æŠŠç§»åŠ¨å…‰æ ‡ç§»åŠ¨åˆ°åŒ¹é…çš„è¯ï¼› æŒ‰ä¸‹ Esc å–æ¶ˆæœç´¢ã€‚</p>
<p><code>:set wrapscan</code> ç”¨æ¥è®¾ç½®åˆ°æ–‡ä»¶å°¾éƒ¨åæ˜¯å¦é‡æ–°ä»æ–‡ä»¶å¤´å¼€å§‹æœç´¢ã€‚</p>
<h2 id="æŸ¥æ‰¾ä¸æ›¿æ¢" tabindex="-1"> æŸ¥æ‰¾ä¸æ›¿æ¢</h2>
<p><code>:s</code>ï¼ˆsubstituteï¼‰å‘½ä»¤ç”¨æ¥æŸ¥æ‰¾å’Œæ›¿æ¢å­—ç¬¦ä¸²ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div><pre><code>:{ä½œç”¨èŒƒå›´}s/{ç›®æ ‡}/{æ›¿æ¢}/{æ›¿æ¢æ ‡å¿—}
</code></pre><div aria-hidden="true"><div></div></div></div><p>ä¾‹å¦‚ <code>:%s/foo/bar/g</code> ä¼šåœ¨å…¨å±€èŒƒå›´(<code>%</code>)æŸ¥æ‰¾ <code>foo</code> å¹¶æ›¿æ¢ä¸º <code>bar</code>ï¼Œæ‰€æœ‰å‡ºç°éƒ½ä¼šè¢«æ›¿æ¢ï¼ˆ<code>g</code>ï¼‰ã€‚</p>
<h3 id="ä½œç”¨èŒƒå›´" tabindex="-1"> ä½œç”¨èŒƒå›´</h3>
<p>ä½œç”¨èŒƒå›´åˆ†ä¸ºå½“å‰è¡Œã€å…¨æ–‡ã€é€‰åŒºç­‰ç­‰ã€‚</p>
<p>å½“å‰è¡Œï¼š</p>
<div><pre><code>:s/foo/bar/g
</code></pre><div aria-hidden="true"><div></div></div></div><p>å…¨æ–‡ï¼š</p>
<div><pre><code>:%s/foo/bar/g
</code></pre><div aria-hidden="true"><div></div></div></div><p>é€‰åŒºï¼Œåœ¨ Visual æ¨¡å¼ä¸‹é€‰æ‹©åŒºåŸŸåè¾“å…¥ <code>:</code>ï¼ŒVim å³å¯è‡ªåŠ¨è¡¥å…¨ä¸º <code>:'&lt;,'&gt;</code>ã€‚</p>
<div><pre><code>:'&lt;,'>s/foo/bar/g
</code></pre><div aria-hidden="true"><div></div></div></div><p>2-11 è¡Œï¼š</p>
<div><pre><code>:5,12s/foo/bar/g
</code></pre><div aria-hidden="true"><div></div></div></div><p>å½“å‰è¡Œ <code>.</code> ä¸æ¥ä¸‹æ¥ä¸¤è¡Œ <code>+2</code>ï¼š</p>
<div><pre><code>:.,+2s/foo/bar/g
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="æ›¿æ¢æ ‡å¿—ç¬¦" tabindex="-1"> æ›¿æ¢æ ‡å¿—ç¬¦</h3>
<p>ä¸Šæ–‡ä¸­å‘½ä»¤ç»“å°¾çš„ <code>g</code> å³æ˜¯æ›¿æ¢æ ‡å¿—ä¹‹ä¸€ï¼Œè¡¨ç¤ºå…¨å±€ <code>global</code> æ›¿æ¢ï¼ˆå³æ›¿æ¢ç›®æ ‡çš„æ‰€æœ‰å‡ºç°ï¼‰ã€‚ è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„æ›¿æ¢æ ‡å¿—ï¼š</p>
<p>ç©ºæ›¿æ¢æ ‡å¿—è¡¨ç¤ºåªæ›¿æ¢ä»å…‰æ ‡ä½ç½®å¼€å§‹ï¼Œç›®æ ‡çš„ç¬¬ä¸€æ¬¡å‡ºç°ï¼š</p>
<div><pre><code>:%s/foo/bar
</code></pre><div aria-hidden="true"><div></div></div></div><p><code>i</code> è¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼Œ<code>I</code> è¡¨ç¤ºå¤§å°å†™æ•æ„Ÿï¼š</p>
<div><pre><code>:%s/foo/bar/i
# ç­‰æ•ˆäºæ¨¡å¼ä¸­çš„\cï¼ˆä¸æ•æ„Ÿï¼‰æˆ–\Cï¼ˆæ•æ„Ÿï¼‰
:%s/foo\c/bar
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p><code>c</code> è¡¨ç¤ºéœ€è¦ç¡®è®¤ï¼Œä¾‹å¦‚å…¨å±€æŸ¥æ‰¾ <code>&quot;foo&quot;</code> æ›¿æ¢ä¸º <code>&quot;bar&quot;</code> å¹¶ä¸”éœ€è¦ç¡®è®¤ï¼š</p>
<div><pre><code>:%s/foo/bar/gc
</code></pre><div aria-hidden="true"><div></div></div></div><p>å›è½¦å Vim ä¼šå°†å…‰æ ‡ç§»åŠ¨åˆ°æ¯ä¸€æ¬¡ <code>&quot;foo&quot;</code> å‡ºç°çš„ä½ç½®ï¼Œå¹¶æç¤º</p>
<div><pre><code>replace with bar (y/n/a/q/l/^E/^Y)?
</code></pre><div aria-hidden="true"><div></div></div></div><p>æŒ‰ä¸‹ <code>y</code> è¡¨ç¤ºæ›¿æ¢ï¼Œ<code>n</code> è¡¨ç¤ºä¸æ›¿æ¢ï¼Œ<code>a</code> è¡¨ç¤ºæ›¿æ¢æ‰€æœ‰ï¼Œ<code>q</code> è¡¨ç¤ºé€€å‡ºæŸ¥æ‰¾æ¨¡å¼ï¼Œ <code>l</code> è¡¨ç¤ºæ›¿æ¢å½“å‰ä½ç½®å¹¶é€€å‡ºã€‚<code>^E</code> ä¸ <code>^Y</code> æ˜¯å…‰æ ‡ç§»åŠ¨å¿«æ·é”®ï¼Œå‚è€ƒï¼š <a href="https://harttle.land/2015/11/07/vim-cursor.html" target="_blank" rel="noopener noreferrer">Vim ä¸­å¦‚ä½•å¿«é€Ÿè¿›è¡Œå…‰æ ‡ç§»åŠ¨</a>ã€‚</p>
<h2 id="é«˜äº®è®¾ç½®" tabindex="-1"> é«˜äº®è®¾ç½®</h2>
<h3 id="é«˜äº®é¢œè‰²è®¾ç½®" tabindex="-1"> é«˜äº®é¢œè‰²è®¾ç½®</h3>
<p>å¦‚æœä½ åƒæˆ‘ä¸€æ ·è§‰å¾—é«˜äº®çš„é¢œè‰²ä¸å¤ªèˆ’æœï¼Œå¯ä»¥åœ¨ <code>~/.vimrc</code> ä¸­è¿›è¡Œè®¾ç½®ï¼š</p>
<div><pre><code>highlight Search ctermbg=yellow ctermfg=black 
highlight IncSearch ctermbg=black ctermfg=yellow 
highlight MatchParen cterm=underline ctermbg=NONE ctermfg=NONE
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>ä¸Šè¿°é…ç½®æŒ‡å®š Search ç»“æœçš„å‰æ™¯è‰²ï¼ˆforegroundï¼‰ä¸ºé»‘è‰²ï¼ŒèƒŒæ™¯è‰²ï¼ˆbackgroundï¼‰ä¸ºç°è‰²ï¼› æ¸è¿›æœç´¢çš„å‰æ™¯è‰²ä¸ºé»‘è‰²ï¼ŒèƒŒæ™¯è‰²ä¸ºé»„è‰²ï¼›å…‰æ ‡å¤„çš„å­—ç¬¦åŠ ä¸‹åˆ’çº¿ã€‚</p>
<blockquote>
<p>æ›´å¤šçš„ CTERM é¢œè‰²å¯ä»¥æŸ¥é˜…ï¼šhttp://vim.wikia.com/wiki/Xterm256_color_names_for_console_Vim</p>
</blockquote>
<h3 id="ç¦ç”¨-å¯ç”¨é«˜äº®" tabindex="-1"> ç¦ç”¨/å¯ç”¨é«˜äº®</h3>
<p>æœ‰æœ¨æœ‰è§‰å¾—æ¯æ¬¡æŸ¥æ‰¾æ›¿æ¢å Vim ä»ç„¶é«˜äº®ç€æœç´¢ç»“æœï¼Ÿ å¯ä»¥æ‰‹åŠ¨è®©å®ƒåœæ­¢é«˜äº®ï¼Œåœ¨ normal æ¨¡å¼ä¸‹è¾“å…¥ï¼š</p>
<div><pre><code>:nohighlight
" ç­‰æ•ˆäº
:nohl
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>å…¶å®ä¸Šè¿°å‘½ä»¤ç¦ç”¨äº†æ‰€æœ‰é«˜äº®ï¼Œåªç¦ç”¨æœç´¢é«˜äº®çš„å‘½ä»¤æ˜¯ <code>:set nohlsearch</code>ã€‚ ä¸‹æ¬¡æœç´¢æ—¶éœ€è¦ <code>:set hlsearch</code> å†æ¬¡å¯åŠ¨æœç´¢é«˜äº®ã€‚</p>
<h4 id="å»¶æ—¶å…³é—­é«˜äº®" tabindex="-1"> å»¶æ—¶å…³é—­é«˜äº®</h4>
<p>æ€ä¹ˆèƒ½å¤Ÿè®© Vim æŸ¥æ‰¾/æ›¿æ¢åä¸€æ®µæ—¶é—´è‡ªåŠ¨å–æ¶ˆé«˜äº®ï¼Œå‘ç”ŸæŸ¥æ‰¾æ—¶è‡ªåŠ¨å¼€å¯å‘¢ï¼Ÿ</p>
<div><pre><code>" å½“å…‰æ ‡ä¸€æ®µæ—¶é—´ä¿æŒä¸åŠ¨äº†ï¼Œå°±ç¦ç”¨é«˜äº®
autocmd cursorhold * set nohlsearch
" å½“è¾“å…¥æŸ¥æ‰¾å‘½ä»¤æ—¶ï¼Œå†å¯ç”¨é«˜äº®
noremap n :set hlsearch&lt;cr>n
noremap N :set hlsearch&lt;cr>N
noremap / :set hlsearch&lt;cr>/
noremap ? :set hlsearch&lt;cr>?
noremap * *:set hlsearch&lt;cr>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><blockquote>
<p>å°†ä¸Šè¿°é…ç½®ç²˜è´´åˆ° <code>~/.vimrc</code>ï¼Œé‡æ–°æ‰“å¼€ vim å³å¯ç”Ÿæ•ˆã€‚</p>
</blockquote>
<h4 id="ä¸€é”®å…³é—­é«˜äº®" tabindex="-1"> ä¸€é”®å…³é—­é«˜äº®</h4>
<p>å¦‚æœå»¶æ—¶ç¦ç”¨æœç´¢é«˜äº®ä»ç„¶ä¸å¤Ÿèˆ’æœï¼Œå¯ä»¥è®¾ç½®å¿«æ·é”®æ¥ä¸€é”®ç¦ç”¨/å¼€å¯æœç´¢é«˜äº®ï¼š</p>
<div><pre><code>noremap n :set hlsearch&lt;cr>n
noremap N :set hlsearch&lt;cr>N
noremap / :set hlsearch&lt;cr>/
noremap ? :set hlsearch&lt;cr>?
noremap * *:set hlsearch&lt;cr>

nnoremap &lt;c-h> :call DisableHighlight()&lt;cr>
function! DisableHighlight()
    set nohlsearch
endfunc
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>å¸Œæœ›å…³é—­é«˜äº®æ—¶åªéœ€è¦æŒ‰ä¸‹ <code>Ctrl+H</code>ï¼Œå½“å‘ç”Ÿä¸‹æ¬¡æœç´¢æ—¶åˆä¼šè‡ªåŠ¨å¯ç”¨ã€‚</p>
<h2 id="å‚è€ƒé˜…è¯»" tabindex="-1"> å‚è€ƒé˜…è¯»</h2>
<ul>
<li>XTERM 256 è‰²ï¼šhttp://vim.wikia.com/wiki/Xterm256_color_names_for_console_Vim</li>
<li>Vim Wikia - æŸ¥æ‰¾ä¸æ›¿æ¢ï¼šhttp://vim.wikia.com/wiki/Search_and_replace</li>
<li>ç”¨ Vim æ‰“é€  IDE ç¯å¢ƒï¼šhttps://harttle.land/2015/11/04/vim-ide.html</li>
</ul>
<p>æœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer">çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™…è®¸å¯åè®®</a>ï¼ˆCC-BY 4.0ï¼‰è¿›è¡Œè®¸å¯ï¼Œè½¬è½½æ³¨æ˜æ¥æºå³å¯ï¼š https://harttle.land/2016/08/08/vim-search-in-file.htmlã€‚å¦‚æœ‰ç–æ¼ã€è°¬è¯¯ã€ä¾µæƒè¯·é€šè¿‡è¯„è®ºæˆ– <a href="mailto:harttleharttle@gmail.com">é‚®ä»¶</a> æŒ‡å‡ºã€‚</p>
]]></content:encoded>
    </item>
  </channel>
</rss>