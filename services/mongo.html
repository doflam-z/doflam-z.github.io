<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta property="og:url" content="https://doflam-z.github.io/services/mongo.html"><meta property="og:site_name" content="CodeNote"><meta property="og:title" content="mongo"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-08-26T06:14:34.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-08-26T06:14:34.000Z"><title>mongo | CodeNote</title><meta name="description" content="ç¬”è®°ç½‘ç«™ã€‚">
    <meta name="keywords" content="å­¦ä¹ ç¬”è®°" />
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.65a328d2.css">
    <link rel="modulepreload" href="/assets/app.eb749dcb.js"><link rel="modulepreload" href="/assets/mongo.html.e4626fd6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/mongo.html.60cc8508.js">
    <!-- Matomo æ­¤åŒºå—ä¸ºç»Ÿè®¡ä»£ç ï¼Œè¯·åˆ é™¤-->
    <!-- End Matomo Code æ­¤åŒºå—ä¸ºç»Ÿè®¡ä»£ç ï¼Œè¯·åˆ é™¤-->
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="CodeNote"><!----><span class="site-name hide-in-pad">CodeNote</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/blog.html" class="nav-link" aria-label="åšå®¢"><span class="icon iconfont icon-blog"></span>åšå®¢<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä»£ç "><span class="title"><span class="icon iconfont icon-code"></span>ä»£ç </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/code/php.html" class="nav-link" aria-label="PHP"><!---->PHP<!----></a></li><li class="dropdown-item"><a href="/code/tp6ç¬”è®°" class="nav-link" aria-label="/code/tp6ç¬”è®°"><!---->/code/tp6ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/code/Pythonç¬”è®°" class="nav-link" aria-label="/code/Pythonç¬”è®°"><!---->/code/Pythonç¬”è®°<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/iptables.html" class="nav-link" aria-label="iptables"><!---->iptables<!----></a></li><li class="dropdown-subitem"><a href="/linux/linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4.html" class="nav-link" aria-label="LinuxåŸºç¡€å‘½ä»¤"><!---->LinuxåŸºç¡€å‘½ä»¤<!----></a></li><li class="dropdown-subitem"><a href="/linux/Debian10å¸¸ç”¨å‘½ä»¤" class="nav-link" aria-label="/linux/Debian10å¸¸ç”¨å‘½ä»¤"><!---->/linux/Debian10å¸¸ç”¨å‘½ä»¤<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="service"><span class="title"><span class="icon iconfont icon-app"></span>service</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/service/redis" class="nav-link" aria-label="/service/redis"><!---->/service/redis<!----></a></li><li class="dropdown-item"><a href="/service/Mysqlå¸¸ç”¨å‘½ä»¤" class="nav-link" aria-label="/service/Mysqlå¸¸ç”¨å‘½ä»¤"><!---->/service/Mysqlå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="dropdown-item"><a href="/service/mongo" class="nav-link" aria-label="/service/mongo"><!---->/service/mongo<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><a class="repo-link" href="https://github.com/doflam-z/doflam-z.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><div id="docsearch-container"></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Code</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Linux</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Services</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/services/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91.html" class="nav-link sidebar-link sidebar-page" aria-label="/services/æ•°æ®åº“å¼€å‘.md"><!---->/services/æ•°æ®åº“å¼€å‘.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/web_Dockerfile.html" class="nav-link sidebar-link sidebar-page" aria-label="dockerfileç¼–å†™"><!---->dockerfileç¼–å†™<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/jobui_docker%E7%8E%AF%E5%A2%83.html" class="nav-link sidebar-link sidebar-page" aria-label="Dockerç¯å¢ƒå¯åŠ¨"><!---->Dockerç¯å¢ƒå¯åŠ¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/Docker.html" class="nav-link sidebar-link sidebar-page" aria-label="dockerç¬”è®°"><!---->dockerç¬”è®°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/ElasticSearch.html" class="nav-link sidebar-link sidebar-page" aria-label="ElasticSearch"><!---->ElasticSearch<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/%E5%AE%89%E8%A3%85es+kibana.html" class="nav-link sidebar-link sidebar-page" aria-label="es+kibanaéƒ¨ç½²"><!---->es+kibanaéƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/services/mongo.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="mongo"><!---->mongo<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#æœåŠ¡é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡é…ç½®"><!---->æœåŠ¡é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#å…³é—­å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…³é—­å‘½ä»¤"><!---->å…³é—­å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#å¯¼å‡ºæ•°æ®åº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¯¼å‡ºæ•°æ®åº“"><!---->å¯¼å‡ºæ•°æ®åº“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#å¯¼å…¥æ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¯¼å…¥æ•°æ®"><!---->å¯¼å…¥æ•°æ®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#åˆ›å»ºç´¢å¼•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºç´¢å¼•"><!---->åˆ›å»ºç´¢å¼•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#php7æ“ä½œmongodbç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="php7æ“ä½œmongodbç±»"><!---->php7æ“ä½œmongodbç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/mongo.html#mongoçš„aggregateèšåˆæ“ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="mongoçš„aggregateèšåˆæ“ä½œ"><!---->mongoçš„aggregateèšåˆæ“ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/services/redis.html" class="nav-link sidebar-link sidebar-page" aria-label="redis"><!---->redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/supervisor.html" class="nav-link sidebar-link sidebar-page" aria-label="supervisor"><!---->supervisor<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/zabbix.html" class="nav-link sidebar-link sidebar-page" aria-label="æºç å®‰è£…zabbix5.4ï¼ˆcentos6ï¼‰"><!---->æºç å®‰è£…zabbix5.4ï¼ˆcentos6ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å·¥å…·</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><a href="/blog.html" class="title">åšå®¢</a><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->mongo</h1><div class="page-info"><!----><!----><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down" localizeddate="2022å¹´8æœˆ25æ—¥" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 3542 å­—</span><meta property="wordCount" content="3542"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´8æœˆ25æ—¥" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 12 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT12M"></span><span class="visitor-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down" localizeddate="2022å¹´8æœˆ25æ—¥" isoriginal="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" data-path="/services/mongo.html">...</span></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#æœåŠ¡é…ç½®" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#å…³é—­å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">å…³é—­å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#å¯¼å‡ºæ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level3">å¯¼å‡ºæ•°æ®åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#å¯¼å…¥æ•°æ®" class="router-link-active router-link-exact-active toc-link level3">å¯¼å…¥æ•°æ®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#åˆ›å»ºç´¢å¼•" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºç´¢å¼•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#php7æ“ä½œmongodbç±»" class="router-link-active router-link-exact-active toc-link level3">php7æ“ä½œmongodbç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/mongo.html#mongoçš„aggregateèšåˆæ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">mongoçš„aggregateèšåˆæ“ä½œ</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="mongo" tabindex="-1"><a class="header-anchor" href="#mongo" aria-hidden="true">#</a> mongo</h1><h3 id="æœåŠ¡é…ç½®" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡é…ç½®" aria-hidden="true">#</a> æœåŠ¡é…ç½®</h3><h4 id="é…ç½®å¤åˆ¶é›†" tabindex="-1"><a class="header-anchor" href="#é…ç½®å¤åˆ¶é›†" aria-hidden="true">#</a> é…ç½®å¤åˆ¶é›†</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># è¿æ¥</span>
mongo <span class="token number">192.168</span>.2.134:12000
<span class="token comment"># åˆå§‹åŒ–ï¼ˆç¬¬ä¸€æ¬¡é…ç½®ï¼‰</span>
<span class="token operator">&gt;</span>rs.initiate<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>rs.add<span class="token punctuation">(</span><span class="token string">&quot;hostname:120000&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># æŸ¥çœ‹çŠ¶æ€</span>
<span class="token operator">&gt;</span>rs.status<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&gt;</span>rs.add<span class="token punctuation">(</span><span class="token punctuation">{</span>host:<span class="token string">&#39;hostname:12000&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>æ·»åŠ ä¸€ä¸ªå¤åˆ¶é›†<span class="token punctuation">)</span>
<span class="token operator">&gt;</span>rs.addArb<span class="token punctuation">(</span><span class="token string">&quot;hostnamet:30000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>æ·»åŠ ä¸€ä¸ªæŠ•ç¥¨èŠ‚ç‚¹<span class="token punctuation">)</span>
<span class="token operator">&gt;</span>rs.remove<span class="token punctuation">(</span><span class="token string">&quot;hostname:30000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>åˆ é™¤èŠ‚ç‚¹<span class="token punctuation">)</span>


/web/software/mongodb-3.0.7/bin/mongod <span class="token parameter variable">-f</span> /web/bcshell/mongodb/mongodbWT12000.conf <span class="token parameter variable">--rest</span> <span class="token parameter variable">--logpath</span><span class="token operator">=</span>/tmp/mongod.log<span class="token punctuation">(</span>è¾“å‡ºæ—¥å¿—<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¿®æ”¹ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹ä¼˜å…ˆçº§" aria-hidden="true">#</a> ä¿®æ”¹ä¼˜å…ˆçº§</h4><p>é€šè¿‡æ”¹åŠ¨priorityçš„å€¼æ¥å®ç°ï¼ˆé»˜è®¤çš„ä¼˜å…ˆçº§æ˜¯1ï¼ˆ0-100ï¼‰ã€‚priorityçš„å€¼è®¾çš„è¶Šå¤§ï¼Œå°±ä¼˜å…ˆæˆä¸ºä¸»ï¼‰</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PRIMARY<span class="token operator">&gt;</span> <span class="token assign-left variable">config</span><span class="token operator">=</span>rs.conf<span class="token punctuation">(</span><span class="token punctuation">)</span>
PRIMARY<span class="token operator">&gt;</span> config.members<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.priority <span class="token operator">=</span> <span class="token number">2</span>       è¿™é‡Œè¦æ³¨æ„ï¼š0è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ1è¡¨ç¤ºç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œä»¥æ­¤ç±»æ¨
PRIMARY<span class="token operator">&gt;</span> rs.reconfig<span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯åŠ¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨å‘½ä»¤" aria-hidden="true">#</a> å¯åŠ¨å‘½ä»¤</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/web/software/mongodb-3.0.7/bin/mongod <span class="token parameter variable">-f</span> /web/bcshell/mongodb/mongodbWT12002.conf <span class="token parameter variable">--rest</span> <span class="token parameter variable">--logpath</span><span class="token operator">=</span>/tmp/mongod2.log
/web/software/mongodb-3.0.7/bin/mongod <span class="token parameter variable">-f</span> /web/bcshell/mongodb/mongodbWT12000.conf <span class="token parameter variable">--rest</span> <span class="token parameter variable">--logpath</span><span class="token operator">=</span>/tmp/mongod.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å…³é—­å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å…³é—­å‘½ä»¤" aria-hidden="true">#</a> å…³é—­å‘½ä»¤</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.shutdownServer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="åˆ›å»ºç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºç”¨æˆ·" aria-hidden="true">#</a> åˆ›å»ºç”¨æˆ·</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#è¿›å»mongoååˆ‡æ¢åˆ°adminåº“</span>
use admin
<span class="token comment">#åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·</span>
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>user:<span class="token string">&quot;root&quot;</span>,pwd:<span class="token string">&quot;root123&quot;</span>,roles:<span class="token punctuation">[</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>user:<span class="token string">&quot;user&quot;</span>,pwd:<span class="token string">&quot;root123&quot;</span>,roles:<span class="token punctuation">[</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#æŸ¥çœ‹ç”¨æˆ·</span>
show <span class="token function">users</span>
<span class="token comment">#åˆ é™¤ç”¨æˆ·</span>
db.dropUser<span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token comment">#ä¿®æ”¹å¯†ç </span>
db.updateUser<span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span>,<span class="token punctuation">{</span>pwd:<span class="token string">&quot;123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">#åˆ›å»ºæ™®é€šç”¨æˆ·ï¼Œå¹¶æŒ‡å®šæƒé™</span>
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>
	user:<span class="token string">&quot;jobui&quot;</span>,pwd:<span class="token string">&quot;jobui123&quot;</span>,
	roles:<span class="token punctuation">[</span>
		<span class="token punctuation">{</span>role:<span class="token string">&quot;readWrite&quot;</span>,db:<span class="token string">&quot;tmp&quot;</span><span class="token punctuation">}</span>,
		<span class="token punctuation">{</span>role:<span class="token string">&quot;read&quot;</span>,db:<span class="token string">&quot;tmp2&quot;</span><span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#åˆ›å»ºä¸€ä¸ªæœ‰æ‰€æœ‰åº“æƒé™çš„ç”¨æˆ·</span>
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>
	user:<span class="token string">&quot;jobui_w&quot;</span>,pwd:<span class="token string">&quot;jobui123&quot;</span>,
	roles:<span class="token punctuation">[</span>
		<span class="token punctuation">{</span>role:<span class="token string">&quot;readWriteAnyDatabase&quot;</span>,db:<span class="token string">&quot;admin&quot;</span><span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#ä¿®æ”¹æƒé™</span>
db.grantRolesToUser<span class="token punctuation">(</span><span class="token string">&quot;jobui_w&quot;</span>, <span class="token punctuation">[</span><span class="token punctuation">{</span>role:<span class="token string">&quot;clusterAdmin&quot;</span>, db:<span class="token string">&quot;admin&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">]</span><span class="token punctuation">)</span>

db.createUser<span class="token punctuation">(</span> <span class="token punctuation">{</span> 
    user: <span class="token string">&quot;cluster&quot;</span>, 
    pwd: <span class="token string">&quot;cluster&quot;</span>, 
    roles: <span class="token punctuation">[</span> <span class="token punctuation">{</span> role: <span class="token string">&quot;clusterAdmin&quot;</span>, db: <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">#ç”Ÿæˆå¯†é’¥</span>
openssl rand <span class="token parameter variable">-base64</span> <span class="token number">100</span> <span class="token operator">&gt;</span>/web/shell/mongodb/mongo-keyfile
<span class="token function">chmod</span> <span class="token number">400</span> mongo-keyfile

mongod <span class="token parameter variable">-f</span> /web/shell/mongodb/mongodbWT12002.conf <span class="token parameter variable">--keyFile</span><span class="token operator">=</span>/web/shell/mongodb/mongo-keyfile
mongod <span class="token parameter variable">-f</span> /web/shell/mongodb/mongodbWT12003.conf <span class="token parameter variable">--keyFile</span><span class="token operator">=</span>/web/shell/mongodb/mongo-keyfile
mongod <span class="token parameter variable">-f</span> /web/shell/mongodb/mongodbWT12004.conf <span class="token parameter variable">--keyFile</span><span class="token operator">=</span>/web/shell/mongodb/mongo-keyfile

Readï¼šå…è®¸ç”¨æˆ·è¯»å–æŒ‡å®šæ•°æ®åº“
readWriteï¼šå…è®¸ç”¨æˆ·è¯»å†™æŒ‡å®šæ•°æ®åº“
dbAdminï¼šå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šæ•°æ®åº“ä¸­æ‰§è¡Œç®¡ç†å‡½æ•°ï¼Œå¦‚ç´¢å¼•åˆ›å»ºã€åˆ é™¤ï¼ŒæŸ¥çœ‹ç»Ÿè®¡æˆ–è®¿é—®system.profile
userAdminï¼šå…è®¸ç”¨æˆ·å‘system.usersé›†åˆå†™å…¥ï¼Œå¯ä»¥æ‰¾æŒ‡å®šæ•°æ®åº“é‡Œåˆ›å»ºã€åˆ é™¤å’Œç®¡ç†ç”¨æˆ·
clusterAdminï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰åˆ†ç‰‡å’Œå¤åˆ¶é›†ç›¸å…³å‡½æ•°çš„ç®¡ç†æƒé™ã€‚
readAnyDatabaseï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»æƒé™
readWriteAnyDatabaseï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»å†™æƒé™
userAdminAnyDatabaseï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„userAdminæƒé™
dbAdminAnyDatabaseï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„dbAdminæƒé™ã€‚
rootï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ã€‚è¶…çº§è´¦å·ï¼Œè¶…çº§æƒé™

<span class="token comment"># éªŒè¯å¯†ç </span>
<span class="token operator">&gt;</span>use admin<span class="token punctuation">;</span>
<span class="token operator">&gt;</span>db.auth<span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span>, <span class="token string">&quot;passwd&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># ç™»å½•ç›´æ¥éªŒè¯å¯†ç </span>
mongo <span class="token number">192.168</span>.1.36:27017 <span class="token parameter variable">-u</span> <span class="token string">&quot;jobui_w&quot;</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;j&quot;</span> <span class="token parameter variable">--authenticationDatabase</span> <span class="token string">&quot;admin&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;JobProfessionID&quot;</span><span class="token punctuation">)</span>
show tables

<span class="token comment">#åˆ›å»ºæ•°æ®åº“</span>
<span class="token variable"><span class="token variable">`</span>use DATABASE_NAME<span class="token variable">`</span></span>

<span class="token comment">#åˆ‡æ¢åˆ°æ•°æ®åº“</span>
<span class="token variable"><span class="token variable">`</span>use <span class="token builtin class-name">test</span><span class="token variable">`</span></span>

<span class="token comment">#åˆ›å»ºé›†åˆ</span>
<span class="token variable"><span class="token variable">`</span>db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;runoob&quot;</span><span class="token punctuation">)</span><span class="token variable">`</span></span>

<span class="token comment">#æŸ¥çœ‹é›†åˆ</span>
<span class="token variable"><span class="token variable">`</span>show collections<span class="token variable">`</span></span>

<span class="token comment">#åˆ é™¤é›†åˆ</span>
<span class="token variable"><span class="token variable">`</span>db.é›†åˆåç§°.drop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">`</span></span>

<span class="token comment">#æŸ¥çœ‹é›†åˆæ¡æ•°</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userTmp&#39;</span><span class="token punctuation">)</span>.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.count<span class="token punctuation">(</span><span class="token punctuation">)</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;userTmp_202110&quot;</span><span class="token punctuation">)</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;companyTmp_202110&#39;</span><span class="token punctuation">)</span>.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;c&#39;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&#39;d&#39;</span><span class="token builtin class-name">:</span> -1<span class="token punctuation">}</span>, <span class="token punctuation">{</span>unique: true<span class="token punctuation">}</span><span class="token punctuation">)</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userTmp_202110&#39;</span><span class="token punctuation">)</span>.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;u&#39;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&#39;d&#39;</span><span class="token builtin class-name">:</span> -1<span class="token punctuation">}</span>, <span class="token punctuation">{</span>unique: true<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯¼å‡ºæ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#å¯¼å‡ºæ•°æ®åº“" aria-hidden="true">#</a> å¯¼å‡ºæ•°æ®åº“</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mongodump <span class="token parameter variable">-h</span> <span class="token number">192.168</span>.1.35:12000 <span class="token parameter variable">-d</span> jobui_tmp <span class="token parameter variable">-o</span> /ssd_data/mongobackups/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¯¼å…¥æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥æ•°æ®" aria-hidden="true">#</a> å¯¼å…¥æ•°æ®</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="åˆ›å»ºç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºç´¢å¼•" aria-hidden="true">#</a> åˆ›å»ºç´¢å¼•</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#è¯­æ³•ä¸­ Key å€¼ä¸ºä½ è¦åˆ›å»ºçš„ç´¢å¼•å­—æ®µï¼Œ1 ä¸ºæŒ‡å®šæŒ‰å‡åºåˆ›å»ºç´¢å¼•ï¼Œå¦‚æœä½ æƒ³æŒ‰é™åºæ¥åˆ›å»ºç´¢å¼•æŒ‡å®šä¸º -1 å³å¯ã€‚</span>
<span class="token operator">&gt;</span>db.collection.createIndex<span class="token punctuation">(</span>keys, options<span class="token punctuation">)</span>

<span class="token comment">#åœ¨åå°åˆ›å»ºå¤åˆç´¢å¼•</span>
db.values.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>open: <span class="token number">1</span>, close: <span class="token number">1</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span>background: true<span class="token punctuation">}</span><span class="token punctuation">)</span>
db.col.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;c&#39;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&#39;d&#39;</span><span class="token builtin class-name">:</span> -1<span class="token punctuation">}</span>, <span class="token punctuation">{</span>unique: true<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">#åˆ›å»ºå•æ¡ç´¢å¼•</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userTmp_202109&#39;</span><span class="token punctuation">)</span>.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;lut&#39;</span>:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">#1ã€æŸ¥çœ‹é›†åˆç´¢å¼•</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userFollowCompany&#39;</span><span class="token punctuation">)</span>.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#2ã€æŸ¥çœ‹é›†åˆç´¢å¼•å¤§å°</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userFollowCompany&#39;</span><span class="token punctuation">)</span>.totalIndexSize<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#3ã€åˆ é™¤é›†åˆæ‰€æœ‰ç´¢å¼•</span>
db.col.dropIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#4ã€åˆ é™¤é›†åˆæŒ‡å®šç´¢å¼•</span>
db.col.dropIndex<span class="token punctuation">(</span><span class="token string">&quot;ç´¢å¼•åç§°&quot;</span><span class="token punctuation">)</span>

<span class="token comment">#æŸ¥çœ‹ç´¢å¼•å»ºç«‹çŠ¶æ€</span>
db.currentOp<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#ç»ˆæ­¢ç´¢å¼•çš„åˆ›å»º</span>
db.killOp<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#é«˜çº§èšç±»</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userFollowCompany&#39;</span><span class="token punctuation">)</span>.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span><span class="token variable">$match</span>:<span class="token punctuation">{</span>cid:<span class="token punctuation">{</span><span class="token variable">$in</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">788679</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$unwind</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">$cid</span>&quot;</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$match</span>:<span class="token punctuation">{</span>cid:<span class="token punctuation">{</span><span class="token variable">$ne</span>:788679<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$group</span>:<span class="token punctuation">{</span>_id:<span class="token string">&quot;<span class="token variable">$cid</span>&quot;</span>,num:<span class="token punctuation">{</span><span class="token variable">$sum</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$sort</span>:<span class="token punctuation">{</span>num:-1<span class="token punctuation">}</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$limit</span>:100<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;userFollowCompany&#39;</span><span class="token punctuation">)</span>.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token variable">$match</span>:<span class="token punctuation">{</span><span class="token string">&#39;mint&#39;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token variable">$gt</span>:20220401<span class="token punctuation">}</span>, cid:<span class="token punctuation">{</span><span class="token variable">$in</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">15110</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token variable">$unwind</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">$cid</span>&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token variable">$group</span>:<span class="token punctuation">{</span>_id:<span class="token string">&quot;<span class="token variable">$cid</span>&quot;</span>,num:<span class="token punctuation">{</span><span class="token variable">$sum</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token variable">$sort</span>:<span class="token punctuation">{</span>num:-1<span class="token punctuation">}</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token variable">$limit</span>:100<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

db.getCollection<span class="token punctuation">(</span><span class="token string">&#39;company_profile&#39;</span><span class="token punctuation">)</span>.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span><span class="token variable">$group</span>:<span class="token punctuation">{</span>_id:<span class="token string">&quot;<span class="token variable">$domain</span>&quot;</span>,num:<span class="token punctuation">{</span><span class="token variable">$sum</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$sort</span>:<span class="token punctuation">{</span>num:-1<span class="token punctuation">}</span><span class="token punctuation">}</span>,
	<span class="token punctuation">{</span><span class="token variable">$limit</span>:100<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="createindex-æ¥æ”¶å¯é€‰å‚æ•°-å¯é€‰å‚æ•°åˆ—è¡¨å¦‚ä¸‹" tabindex="-1"><a class="header-anchor" href="#createindex-æ¥æ”¶å¯é€‰å‚æ•°-å¯é€‰å‚æ•°åˆ—è¡¨å¦‚ä¸‹" aria-hidden="true">#</a> createIndex() æ¥æ”¶å¯é€‰å‚æ•°ï¼Œå¯é€‰å‚æ•°åˆ—è¡¨å¦‚ä¸‹ï¼š</h5><table><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">background</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">å»ºç´¢å¼•è¿‡ç¨‹ä¼šé˜»å¡å…¶å®ƒæ•°æ®åº“æ“ä½œï¼Œbackgroundå¯æŒ‡å®šä»¥åå°æ–¹å¼åˆ›å»ºç´¢å¼•ï¼Œå³å¢åŠ  &quot;background&quot; å¯é€‰å‚æ•°ã€‚ &quot;background&quot; é»˜è®¤å€¼ä¸º<strong>false</strong>ã€‚</td></tr><tr><td style="text-align:left;">unique</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">å»ºç«‹çš„ç´¢å¼•æ˜¯å¦å”¯ä¸€ã€‚æŒ‡å®šä¸ºtrueåˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚é»˜è®¤å€¼ä¸º<strong>false</strong>.</td></tr><tr><td style="text-align:left;">name</td><td style="text-align:left;">string</td><td style="text-align:left;">ç´¢å¼•çš„åç§°ã€‚å¦‚æœæœªæŒ‡å®šï¼ŒMongoDBçš„é€šè¿‡è¿æ¥ç´¢å¼•çš„å­—æ®µåå’Œæ’åºé¡ºåºç”Ÿæˆä¸€ä¸ªç´¢å¼•åç§°ã€‚</td></tr><tr><td style="text-align:left;">dropDups</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">**3.0+ç‰ˆæœ¬å·²åºŸå¼ƒã€‚**åœ¨å»ºç«‹å”¯ä¸€ç´¢å¼•æ—¶æ˜¯å¦åˆ é™¤é‡å¤è®°å½•,æŒ‡å®š true åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚é»˜è®¤å€¼ä¸º <strong>false</strong>.</td></tr><tr><td style="text-align:left;">sparse</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">å¯¹æ–‡æ¡£ä¸­ä¸å­˜åœ¨çš„å­—æ®µæ•°æ®ä¸å¯ç”¨ç´¢å¼•ï¼›è¿™ä¸ªå‚æ•°éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueçš„è¯ï¼Œåœ¨ç´¢å¼•å­—æ®µä¸­ä¸ä¼šæŸ¥è¯¢å‡ºä¸åŒ…å«å¯¹åº”å­—æ®µçš„æ–‡æ¡£.ã€‚é»˜è®¤å€¼ä¸º <strong>false</strong>.</td></tr><tr><td style="text-align:left;">expireAfterSeconds</td><td style="text-align:left;">integer</td><td style="text-align:left;">æŒ‡å®šä¸€ä¸ªä»¥ç§’ä¸ºå•ä½çš„æ•°å€¼ï¼Œå®Œæˆ TTLè®¾å®šï¼Œè®¾å®šé›†åˆçš„ç”Ÿå­˜æ—¶é—´ã€‚</td></tr><tr><td style="text-align:left;">v</td><td style="text-align:left;">index version</td><td style="text-align:left;">ç´¢å¼•çš„ç‰ˆæœ¬å·ã€‚é»˜è®¤çš„ç´¢å¼•ç‰ˆæœ¬å–å†³äºmongodåˆ›å»ºç´¢å¼•æ—¶è¿è¡Œçš„ç‰ˆæœ¬ã€‚</td></tr><tr><td style="text-align:left;">weights</td><td style="text-align:left;">document</td><td style="text-align:left;">ç´¢å¼•æƒé‡å€¼ï¼Œæ•°å€¼åœ¨ 1 åˆ° 99,999 ä¹‹é—´ï¼Œè¡¨ç¤ºè¯¥ç´¢å¼•ç›¸å¯¹äºå…¶ä»–ç´¢å¼•å­—æ®µçš„å¾—åˆ†æƒé‡ã€‚</td></tr><tr><td style="text-align:left;">default_language</td><td style="text-align:left;">string</td><td style="text-align:left;">å¯¹äºæ–‡æœ¬ç´¢å¼•ï¼Œè¯¥å‚æ•°å†³å®šäº†åœç”¨è¯åŠè¯å¹²å’Œè¯å™¨çš„è§„åˆ™çš„åˆ—è¡¨ã€‚ é»˜è®¤ä¸ºè‹±è¯­</td></tr><tr><td style="text-align:left;">language_override</td><td style="text-align:left;">string</td><td style="text-align:left;">å¯¹äºæ–‡æœ¬ç´¢å¼•ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†åŒ…å«åœ¨æ–‡æ¡£ä¸­çš„å­—æ®µåï¼Œè¯­è¨€è¦†ç›–é»˜è®¤çš„languageï¼Œé»˜è®¤å€¼ä¸º language.</td></tr></tbody></table><h5 id="é€šè¿‡explian-åˆ†ææ‰§è¡Œæƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡explian-åˆ†ææ‰§è¡Œæƒ…å†µ" aria-hidden="true">#</a> é€šè¿‡<a href="https://docs.mongodb.com/manual/reference/method/cursor.explain/" target="_blank" rel="noopener noreferrer">explian()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>åˆ†ææ‰§è¡Œæƒ…å†µ</h5><p>db.getCollection(&#39;companyTmp&#39;).find({c:14298217,d:&quot;20210829&quot;}).explain()</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;queryPlanner&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;plannerVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;namespace&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;jobui_tmp.companyTmp&quot;</span>,
        <span class="token string">&quot;indexFilterSet&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;parsedQuery&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;<span class="token variable">$and</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> 
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;c&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">14298217.0</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>, 
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;d&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;20210829&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;winningPlan&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;FETCH&quot;</span>,
            <span class="token string">&quot;inputStage&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;IXSCAN&quot;</span>,
                <span class="token string">&quot;keyPattern&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;c&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1.0</span>,
                    <span class="token string">&quot;d&quot;</span> <span class="token builtin class-name">:</span> <span class="token parameter variable">-1.0</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;indexName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;c_1_d_-1&quot;</span>,
                <span class="token string">&quot;isMultiKey&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;direction&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;forward&quot;</span>,
                <span class="token string">&quot;indexBounds&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;c&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> 
                        <span class="token string">&quot;[14298217.0, 14298217.0]&quot;</span>
                    <span class="token punctuation">]</span>,
                    <span class="token string">&quot;d&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> 
                        <span class="token string">&quot;[<span class="token entity" title="\&quot;">\&quot;</span>20210829<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>20210829<span class="token entity" title="\&quot;">\&quot;</span>]&quot;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;rejectedPlans&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;serverInfo&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost.localdomain&quot;</span>,
        <span class="token string">&quot;port&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">12000</span>,
        <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3.0.7&quot;</span>,
        <span class="token string">&quot;gitVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;6ce7cbe8c6b899552dadd907604559806aa2e9bd&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1.0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="php7æ“ä½œmongodbç±»" tabindex="-1"><a class="header-anchor" href="#php7æ“ä½œmongodbç±»" aria-hidden="true">#</a> php7æ“ä½œmongodbç±»</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token doc-comment comment">/**
 * desc
 * version    1.0
 * author    user
 * date    2021/12/22
 */</span>


<span class="token variable">$manager</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>Manager</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;mongodb://192.168.1.35:12000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//æ’å…¥æ•°æ®</span>
<span class="token variable">$bulk</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>BulkWrite</span><span class="token punctuation">;</span>
<span class="token variable">$bulk</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;x&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">&#39;èœé¸Ÿæ•™ç¨‹&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;url&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;http://www.runoob.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$bulk</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;x&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">&#39;Google&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;url&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;http://www.google.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$bulk</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;x&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">&#39;taobao&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;url&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;http://www.taobao.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$manager</span><span class="token operator">-&gt;</span><span class="token function">executeBulkWrite</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;test.sites&#39;</span><span class="token punctuation">,</span> <span class="token variable">$bulk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$filter</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;x&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;$gt&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token string single-quoted-string">&#39;projection&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">&#39;sort&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;x&#39;</span> <span class="token operator">=&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// æŸ¥è¯¢æ•°æ®</span>
<span class="token variable">$query</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>Query</span><span class="token punctuation">(</span><span class="token variable">$filter</span><span class="token punctuation">,</span> <span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$cursor</span> <span class="token operator">=</span> <span class="token variable">$manager</span><span class="token operator">-&gt;</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;test.sites&#39;</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$cursor</span> <span class="token keyword">as</span> <span class="token variable">$document</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$document</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//æ›´æ–°æ•°æ®</span>
<span class="token variable">$bulk</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>BulkWrite</span><span class="token punctuation">;</span>
<span class="token variable">$bulk</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;x&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;$set&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;èœé¸Ÿå·¥å…·&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;url&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;tool.runoob.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;multi&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;upsert&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$writeConcern</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>WriteConcern</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>WriteConcern</span><span class="token operator">::</span><span class="token constant">MAJORITY</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$manager</span><span class="token operator">-&gt;</span><span class="token function">executeBulkWrite</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;test.sites&#39;</span><span class="token punctuation">,</span> <span class="token variable">$bulk</span><span class="token punctuation">,</span> <span class="token variable">$writeConcern</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//åˆ é™¤æ•°æ®</span>
<span class="token variable">$bulk</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>BulkWrite</span><span class="token punctuation">;</span>
<span class="token variable">$bulk</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;likes&#39;</span> <span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;$gt&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;limit&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// limit ä¸º 1 æ—¶ï¼Œåˆ é™¤ç¬¬ä¸€æ¡åŒ¹é…æ•°æ®</span>
<span class="token comment">//$bulk-&gt;delete([&#39;x&#39; =&gt; 2], [&#39;limit&#39; =&gt; 0]);   // limit ä¸º 0 æ—¶ï¼Œåˆ é™¤æ‰€æœ‰åŒ¹é…æ•°æ®</span>

<span class="token variable">$writeConcern</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>WriteConcern</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context">MongoDB<span class="token punctuation">\</span>Driver<span class="token punctuation">\</span>WriteConcern</span><span class="token operator">::</span><span class="token constant">MAJORITY</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$manager</span><span class="token operator">-&gt;</span><span class="token function">executeBulkWrite</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;jobui_tmp.autoRunRecord&#39;</span><span class="token punctuation">,</span> <span class="token variable">$bulk</span><span class="token punctuation">,</span> <span class="token variable">$writeConcern</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//php5</span>

<span class="token variable">$m</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MongoClient</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;mongodb://192.168.1.24:27017&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿æ¥é»˜è®¤ä¸»æœºå’Œç«¯å£ä¸ºï¼šmongodb://localhost:27017</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token variable">$m</span><span class="token operator">-&gt;</span><span class="token property">count</span><span class="token punctuation">;</span> <span class="token comment">// é€‰æ‹©ä¸€ä¸ªæ•°æ®åº“</span>
<span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-&gt;</span><span class="token property">BlackList</span><span class="token punctuation">;</span> <span class="token comment">// é€‰æ‹©é›†åˆ</span>

<span class="token comment">//æ’å…¥</span>
<span class="token comment">//$db = $m-&gt;test; // è·å–åç§°ä¸º &quot;test&quot; çš„æ•°æ®åº“</span>
<span class="token comment">//$collection = $db-&gt;createCollection(&quot;runoob&quot;);</span>
<span class="token comment">//echo &quot;é›†åˆåˆ›å»ºæˆåŠŸ&quot;;</span>
<span class="token comment">//$collection = $db-&gt;runoob; // é€‰æ‹©é›†åˆ</span>
<span class="token comment">//$document = array(</span>
<span class="token comment">//	&quot;title&quot; =&gt; &quot;MongoDB&quot;,</span>
<span class="token comment">//	&quot;description&quot; =&gt; &quot;database&quot;,</span>
<span class="token comment">//	&quot;likes&quot; =&gt; 100,</span>
<span class="token comment">//	&quot;url&quot; =&gt; &quot;http://www.runoob.com/mongodb/&quot;,</span>
<span class="token comment">//	&quot;by&quot;, &quot;èœé¸Ÿæ•™ç¨‹&quot;</span>
<span class="token comment">//);</span>
<span class="token comment">//$collection-&gt;insert($document);</span>
<span class="token comment">//echo &quot;æ•°æ®æ’å…¥æˆåŠŸ&quot;;</span>


<span class="token comment">//$collection = $db-&gt;runoob; // é€‰æ‹©é›†åˆ</span>

<span class="token variable">$cursor</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;f&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;true&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">&#39;&lt;pre&gt;&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$doc</span> <span class="token operator">=</span> <span class="token variable">$cursor</span><span class="token operator">-&gt;</span><span class="token function">getNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//å¾ªç¯è¯»å–æ¯ä¸ªåŒ¹é…çš„æ–‡æ¡£</span>
	<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$doc</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token string single-quoted-string">&#39;&lt;pre&gt;&#39;</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$cursor</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mongoçš„aggregateèšåˆæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#mongoçš„aggregateèšåˆæ“ä½œ" aria-hidden="true">#</a> mongoçš„aggregateèšåˆæ“ä½œ</h3><h4 id="mongodbä¸­èšåˆ-aggregate-çš„å…·ä½“ä½¿ç”¨ç»“åˆphp" tabindex="-1"><a class="header-anchor" href="#mongodbä¸­èšåˆ-aggregate-çš„å…·ä½“ä½¿ç”¨ç»“åˆphp" aria-hidden="true">#</a> mongoDBä¸­èšåˆ(aggregate)çš„å…·ä½“ä½¿ç”¨ç»“åˆPHP</h4><p>æœ€è¿‘åœ¨å­¦ä¹ mongoDBçš„ä½¿ç”¨ï¼Œæœ¬æ–‡æ¥ä»‹ç»ä¸€ä¸‹å…¶ä¸­aggregateçš„å…·ä½“ä½¿ç”¨</p><p>å…ˆæ¥çœ‹ä¸€ä¸ªåˆ†ç»„çš„ä¾‹å­ï¼Œæœ¬ä¾‹ä¸­<code>$group</code>æ˜¯ä¸€ä¸ªç®¡é“æ“ä½œç¬¦ï¼Œè·å¾—çš„ç»“æœå¯ä»¥æ¥ç€è¾“å‡ºåˆ°ä¸‹ä¸€ä¸ªç®¡é“ï¼Œè€Œå†…éƒ¨çš„<code>$sum</code>æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æ“ä½œç¬¦ã€‚</p><h4 id="ç”¨-group-ä¸¾ä¸ªä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ç”¨-group-ä¸¾ä¸ªä¾‹å­" aria-hidden="true">#</a> ç”¨<code>$group</code> ä¸¾ä¸ªä¾‹å­</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>å°†documentåˆ†ç»„ï¼Œç”¨ä½œç»Ÿè®¡ç»“æœ

    db.Ubisoft.aggregate([ // aggregateæ–¹æ³•æ¥æ”¶çš„æ˜¯ä¸€ä¸ªæ•°ç»„
        {
            $group: {
                _id: &#39;$time&#39;, 
                num: {$sum: 1}
            }
        }
    ])
    // è¿™é‡Œçš„_idå­—æ®µè¡¨ç¤ºä½ è¦åŸºäºå“ªä¸ªå­—æ®µæ¥è¿›è¡Œåˆ†ç»„(å³åˆ¶å®šå­—æ®µå€¼ç›¸åŒçš„ä¸ºä¸€ç»„)ï¼Œè¿™é‡Œçš„$timeå°±è¡¨ç¤ºè¦åŸºäºtimeå­—æ®µæ¥è¿›è¡Œåˆ†ç»„

    // ä¸‹é¢çš„numå­—æ®µçš„å€¼$sum: 1è¡¨ç¤ºçš„æ˜¯è·å–æ»¡è¶³timeå­—æ®µç›¸åŒçš„è¿™ä¸€ç»„çš„æ•°é‡ä¹˜ä»¥åé¢ç»™å®šçš„å€¼(æœ¬ä¾‹ä¸º1ï¼Œé‚£ä¹ˆå°±æ˜¯åŒç»„çš„æ•°é‡)ã€‚
12345678910111213
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆçœ‹å®Œè¿™ä¸ªä¾‹å­ä¹‹åï¼ŒmongoDBä¸­è¿˜æœ‰å…¶ä»–çš„ä¸€äº›ç®¡é“æ“ä½œç¬¦å’Œè¡¨è¾¾å¼æ“ä½œç¬¦ï¼š</p><h4 id="ç®¡é“æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#ç®¡é“æ“ä½œç¬¦" aria-hidden="true">#</a> ç®¡é“æ“ä½œç¬¦</h4><table><thead><tr><th style="text-align:left;">å¸¸ç”¨ç®¡é“</th><th style="text-align:left;">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left;">$group</td><td style="text-align:left;">å°†collectionä¸­çš„documentåˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœ</td></tr><tr><td style="text-align:left;">$match</td><td style="text-align:left;">è¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆç»“æœçš„æ–‡æ¡£</td></tr><tr><td style="text-align:left;">$project</td><td style="text-align:left;">ä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„(ä¾‹å¦‚é‡å‘½åï¼Œå¢åŠ ã€åˆ é™¤å­—æ®µï¼Œåˆ›å»ºç»“ç®—ç»“æœç­‰)</td></tr><tr><td style="text-align:left;">$sort</td><td style="text-align:left;">å°†ç»“æœè¿›è¡Œæ’åºåè¾“å‡º</td></tr><tr><td style="text-align:left;">$limit</td><td style="text-align:left;">é™åˆ¶ç®¡é“è¾“å‡ºçš„ç»“æœä¸ªæ•°</td></tr><tr><td style="text-align:left;">$skip</td><td style="text-align:left;">è·³è¿‡åˆ¶å®šæ•°é‡çš„ç»“æœï¼Œå¹¶ä¸”è¿”å›å‰©ä¸‹çš„ç»“æœ</td></tr><tr><td style="text-align:left;">$unwind</td><td style="text-align:left;">å°†æ•°ç»„ç±»å‹çš„å­—æ®µè¿›è¡Œæ‹†åˆ†</td></tr></tbody></table><h4 id="è¡¨è¾¾å¼æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#è¡¨è¾¾å¼æ“ä½œç¬¦" aria-hidden="true">#</a> è¡¨è¾¾å¼æ“ä½œç¬¦</h4><table><thead><tr><th style="text-align:left;">å¸¸ç”¨è¡¨è¾¾å¼</th><th style="text-align:left;">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left;">$sum</td><td style="text-align:left;">è®¡ç®—æ€»å’Œï¼Œ{KaTeX parse error: Expected &#39;EOF&#39;, got &#39;}&#39; at position 7: sum: 1}Ì²è¡¨ç¤ºè¿”å›æ€»å’ŒÃ—1çš„å€¼(å³æ€»å’Œçš„â€¦sum: â€˜$åˆ¶å®šå­—æ®µâ€™}ä¹Ÿèƒ½ç›´æ¥è·å–åˆ¶å®šå­—æ®µçš„å€¼çš„æ€»å’Œ</td></tr><tr><td style="text-align:left;">$avg</td><td style="text-align:left;">å¹³å‡å€¼</td></tr><tr><td style="text-align:left;">$min</td><td style="text-align:left;">min</td></tr><tr><td style="text-align:left;">$max</td><td style="text-align:left;">max</td></tr><tr><td style="text-align:left;">$push</td><td style="text-align:left;">å°†ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</td></tr><tr><td style="text-align:left;">$first</td><td style="text-align:left;">æ ¹æ®æ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®</td></tr><tr><td style="text-align:left;">$last</td><td style="text-align:left;">åŒç†ï¼Œè·å–æœ€åä¸€ä¸ªæ•°æ®</td></tr></tbody></table><p>äº†è§£å®Œè¿™äº›æ“ä½œç¬¦ä¹‹åï¼Œç»§ç»­æ‹¿<code>$group</code>æ¥è¯•è¯•çœ‹ï¼š æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªåä¸ºUbisoftçš„ä¸€ä¸ªcollectionï¼Œå†…éƒ¨çš„æ–‡æ¡£ä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0cf67270e4fa02d31de42e&quot;),
    &quot;name&quot; : &quot;rainbowSix Siege&quot;,
    &quot;time&quot; : 400.0
}

/* 2 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0cf69270e4fa02d31de42f&quot;),
    &quot;name&quot; : &quot;Assassin&#39;s creed&quot;,
    &quot;time&quot; : 20.0
}

/* 3 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0cf6ad70e4fa02d31de430&quot;),
    &quot;name&quot; : &quot;ghost Recon&quot;,
    &quot;time&quot; : 0.0
}

/* 4 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0d14c870e4fa02d31de436&quot;),
    &quot;name&quot; : &quot;farCry&quot;,
    &quot;time&quot; : 0.0
}
123456789101112131415161718192021222324252627
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ç°åœ¨æ¥è¯•è¯•å…¶ä»–çš„è¡¨è¾¾å¼æ“ä½œç¬¦ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  db.Ubisoft.aggregate([
       {
           $group: {
               _id: &#39;$time&#39;,
               gameName: {$push: &#39;$name&#39;}
           }
       }
   ]) 
12345678
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›ç»“æœä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : 20.0,
    &quot;gameName&quot; : [ 
        &quot;Assassin&#39;s creed&quot;
    ]
}

/* 2 */
{
    &quot;_id&quot; : 0.0,
    &quot;gameName&quot; : [ 
        &quot;ghost Recon&quot;, 
        &quot;farCry&quot;
    ]
}

/* 3 */
{
    &quot;_id&quot; : 400.0,
    &quot;gameName&quot; : [ 
        &quot;rainbowSix Siege&quot;
    ]
}
123456789101112131415161718192021222324
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°timeå­—æ®µç›¸åŒçš„documentè¢«åˆ†ä¸ºäº†ä¸€ç»„ï¼Œè€Œä¸”ä½¿ç”¨$pushè¡¨è¾¾å¼ï¼Œå°†æˆ‘ä»¬åˆ¶å®šçš„documentçš„nameå­—æ®µçš„å€¼ä¹Ÿæ”¾åˆ°äº†ä¸€ä¸ªæ•°ç»„ä¸­ä½œä¸ºæˆ‘ä»¬åœ¨mongoDBè¯­å¥ä¸­åˆ¶å®šçš„gameNameçš„å€¼ã€‚</p><p>å¦å¤–<code>$group</code>ä¸­å¯ä»¥åˆ¶å®š<code>_id:null</code>, å³å¯ä»¥æŠŠæ‰€æœ‰çš„documentåˆ†ä¸ºä¸€ç»„ï¼Œå¯ä»¥ç”¨äºè®¡ç®—å¹³å‡å€¼ä¹‹ç±»çš„æ“ä½œ</p><p>æˆ‘ä»¬å¯ä»¥ç”¨<code>$</code>æŒ‡å®šå­—æ®µæ¥è¡¨ç¤ºé€‰å®šçš„documentçš„field,å¦å¤–å¯ä»¥ä½¿ç”¨<code>$$ROOT</code>æ¥è¡¨ç¤ºé€‰å®šçš„documentçš„æ‰€æœ‰å†…å®¹ï¼ˆä¾‹å¦‚:<code>chosenDocument: {$push: &#39;$$ROOT&#39;}</code>ï¼‰</p><p>ä¸Šè¿°ä¾‹å­åŸºæœ¬ä»‹ç»äº†è¡¨è¾¾å¼æ“ä½œç¬¦çš„ç”¨æ³•ã€‚</p><p>æ¥ç€æ¥çœ‹<code>$match</code></p><h4 id="match" tabindex="-1"><a class="header-anchor" href="#match" aria-hidden="true">#</a> $match</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> db.Ubisoft.aggregate([
        {
            $match: {
                time: {$gte: 20} //é€‰å–timeå­—æ®µ &gt;=20çš„document
            }
        }
    ])
1234567
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°±æ‹¿åˆ°äº†æ‰€æœ‰time&gt;=20çš„document,ç„¶åå¯ä»¥é€šè¿‡å†æ¥ä¸ªç®¡é“æ¥è¿›è¡Œå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬å†æ¥ä¸€ä¸ª<code>$group</code>æ¥è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºç­›é€‰å‡ºæ¥çš„æ‰€æœ‰time&gt;=20çš„documentçš„ä¸ªæ•°ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> db.Ubisoft.aggregate([
        {
            $match: {
                time: {$gte: 20}
            }
        },
        {
            $group: {
                _id: null, // _id: nullè¡¨ç¤ºå…¨é€‰
                totalNum: {$sum: 1}
            }
        }
    ])
12345678910111213
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : null,
    &quot;totalNum&quot; : 2.0
}
12345
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°time&gt;=20çš„documentçš„ä¸ªæ•°ä¸º2</p><h4 id="projectæŠ•å½±" tabindex="-1"><a class="header-anchor" href="#projectæŠ•å½±" aria-hidden="true">#</a> projectæŠ•å½±</h4><p>ä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„(ä¾‹å¦‚é‡å‘½åï¼Œå¢åŠ ã€åˆ é™¤å­—æ®µï¼Œåˆ›å»ºç»“ç®—ç»“æœç­‰)</p><p><code>$project</code>å’Œç›´æ¥ä½¿ç”¨<code>find()</code>çš„å†™æ³•ä¸€æ ·ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.Ubisoft.aggregate([
    {
        $project: {
            _id: 0,  //ä¸æ˜¾ç¤º_idå­—æ®µ
        }
    }
])
1234567
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å’Œæˆ‘ä»¬ç›´æ¥å†™<code>db.Ubisoft.find({},{&#39;_id&#39;: 0})</code>å†™æ³•ä¸€æ · è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;name&quot; : &quot;rainbowSix Siege&quot;,
    &quot;time&quot; : 400.0
}

/* 2 */
{
    &quot;name&quot; : &quot;Assassin&#39;s creed&quot;,
    &quot;time&quot; : 20.0
}

/* 3 */
{
    &quot;name&quot; : &quot;ghost Recon&quot;,
    &quot;time&quot; : 0.0
}

/* 4 */
{
    &quot;name&quot; : &quot;farCry&quot;,
    &quot;time&quot; : 0.0
}
1234567891011121314151617181920212223
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰<code>_id</code>å­—æ®µäº†ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å¦‚æœæƒ³æ‹¿åˆ°æ‰€æœ‰time&gt;=20çš„documentçš„nameå­—æ®µçš„è¯ï¼Œå¯ä»¥æŠŠç®¡é“æ­é…èµ·æ¥ç”¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.Ubisoft.aggregate([
    {
        $match: {
            time: {$gte: 20}
        }
    },
    {
        $project: {
            _id: 0, // _idä¸æ˜¾ç¤º
            name: 1 // nameæ˜¯è¦æ˜¾ç¤ºçš„
        }
    },
    {
        $group: {
            _id: null,
            name: {$push: &#39;$name&#39;}
        }
    }
])
12345678910111213141516171819
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : null,
    &quot;name&quot; : [ 
        &quot;rainbowSix Siege&quot;, 
        &quot;Assassin&#39;s creed&quot;
    ]
}
12345678
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="sort" tabindex="-1"><a class="header-anchor" href="#sort" aria-hidden="true">#</a> $sort</h4><p><code>$sort</code>å’Œæˆ‘ä»¬find()ä¸­æ’åºçš„å†™æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æƒ³å°†æ‰€æœ‰çš„documentæŒ‰ç…§timeé™åºæ¥æ’åˆ—çš„è¯ï¼š</p><p>å’Œ<code>db.Ubisoft.find().sort({time: -1})</code>å†™æ³•æ˜¯ä¸€æ ·çš„:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.Ubisoft.aggregate([
    {
        $sort: {
            time: -1
        }
    }
])
1234567
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒç†ï¼Œ<code>$sort</code>ä¹Ÿå¯ä»¥å’Œå…¶ä»–ç®¡é“æ­é…ä½¿ç”¨</p><h4 id="limit-skip" tabindex="-1"><a class="header-anchor" href="#limit-skip" aria-hidden="true">#</a> $limit $skip</h4><p>å’Œ<code>limit()</code>ä»¥åŠ<code>skip()</code>çš„å†™æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.Ubisoft.find().skip(1).limit(2)
1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨èšåˆå¯ä»¥å†™æˆï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.Ubisoft.aggregate([
    {
        $skip: 1
    },
    {
        $limit: 2
    }
])
12345678
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>limitå’Œskipæ­é…ä½¿ç”¨å¯ä»¥è¾¾åˆ°åˆ†é¡µçš„æ•ˆæœã€‚</p><p>æ³¨æ„å…ˆå†™skipåœ¨å†™limit</p><h4 id="unwind" tabindex="-1"><a class="header-anchor" href="#unwind" aria-hidden="true">#</a> $unwind</h4><p><code>$unwind</code>ç®¡é“å¯ä»¥documentä¸­çš„æ•°ç»„ç±»å‹çš„å­—æ®µè¿›è¡Œæ‹†åˆ†ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚</p><ul><li>åŸºæœ¬ä½¿ç”¨ åœ¨Ubisoftè¿™ä¸ªé›†åˆé‡Œæ–°å¢å¦‚ä¸‹ä¸€æ¡document:</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 5 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e242ed85f6f9cc56da7cc&quot;),
    &quot;name&quot; : &quot;gameList&quot;,
    &quot;list&quot; : [ 
        &quot;dota2&quot;, 
        &quot;csgo&quot;, 
        &quot;ow&quot;
    ]
}
12345678910
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬é’ˆå¯¹è¿™ä¸ªdocumentä¸­çš„listå­—æ®µæ¥è¿›è¡Œ<code>$unwind</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.Ubisoft.aggregate([
    {
        $unwind: &#39;$list&#39; // æŒ‡å®šlistå­—æ®µ
    }
])
12345
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e242ed85f6f9cc56da7cc&quot;),
    &quot;name&quot; : &quot;gameList&quot;,
    &quot;list&quot; : &quot;dota2&quot;
}

/* 2 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e242ed85f6f9cc56da7cc&quot;),
    &quot;name&quot; : &quot;gameList&quot;,
    &quot;list&quot; : &quot;csgo&quot;
}

/* 3 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e242ed85f6f9cc56da7cc&quot;),
    &quot;name&quot; : &quot;gameList&quot;,
    &quot;list&quot; : &quot;ow&quot;
}
1234567891011121314151617181920
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°unwindæ˜¯å°†æ–‡æ¡£ä¸­çš„æ•°ç»„å­—æ®µè¿›è¡Œæ‹†åˆ†ï¼Œå¦‚æœæœ‰å…¶ä»–æ–‡æ¡£çš„listå­—æ®µä¹Ÿæ˜¯æ•°ç»„ï¼Œä¹Ÿä¼šä¸€å¹¶æ‹†åˆ†ã€‚</p><ul><li>ç‰¹æ®Šæƒ…å†µä¸‹çš„unwind(ç©ºæ•°ç»„ï¼Œnull,éæ•°ç»„ï¼Œæ— æŒ‡å®šå­—æ®µ)</li></ul><p>é’ˆå¯¹ç‰¹æ®Šæƒ…å†µï¼Œæ–°å»ºä¸€ä¸ªcolletion,å†…å®¹ä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e27fdd85f6f9cc56da7ce&quot;),
    &quot;list&quot; : null
}

/* 2 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e2827d85f6f9cc56da7cf&quot;),
    &quot;list&quot; : []
}

/* 3 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e2834d85f6f9cc56da7d0&quot;),
    &quot;list&quot; : &quot;notArray&quot;
}

/* 4 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e2844d85f6f9cc56da7d1&quot;)
}
12345678910111213141516171819202122
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥è¿›è¡Œ<code>$unwind</code>ï¼Œ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.unwind.aggregate([
    {
        $unwind: &#39;$list&#39;
    }
])
12345
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/* 1 */
{
    &quot;_id&quot; : ObjectId(&quot;5b0e2834d85f6f9cc56da7d0&quot;),
    &quot;list&quot; : &quot;notArray&quot;
}
12345
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°<code>[]</code>,<code>null</code>,ä»¥åŠæ— æŒ‡å®šå­—æ®µçš„æ•°æ®éƒ½ä¸¢å¤±äº†ï¼Œ ä¸ºäº†ä¸ä¸¢å¤±æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.unwind.aggregate([
    {
        $unwind: {
            path: &#39;$list&#39;, // pathæ˜¯æŒ‡å®šå­—æ®µ
            preserveNullAndEmptyArrays: true //è¯¥å±æ€§ä¸ºtrueå³ä¿ç•™
        }
    }
])
12345678
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ¬¡è¾“å‡ºç»“æœå°±ä¿ç•™äº†nullä»¥åŠç©ºæ•°ç»„ï¼Œå€¼å¾—å…³æ³¨çš„å°±æ˜¯<code>preserveNullAndEmptyArrays</code>è¿™ä¸ªå±æ€§ï¼Œä¸ºtrueçš„æ—¶å€™å°±ä¿ç•™ã€‚</p><p>ä¸‹é¢ç»“åˆPHP ä»£ç </p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//$server æ ¹æ®è‡ªå·±çš„æœåŠ¡å™¨æ¥
$mongo =  new \MongoClient($server, array(&#39;connect&#39;=&gt;true));// ç«‹å³è¿æ¥

$db = $mongo-&gt;colName;//é€‰æ‹©æ•°æ®åº“
$collection = $db-&gt;file_log;//é€‰æ‹©æ–‡æ¡£é›†åˆ

$filter[&quot;status&quot;] = array(&quot;\$in&quot; =&gt; array(0, 2, 5)); 
$filter[&quot;a_id&quot;] = array(&quot;\$eq&quot; =&gt; $a_id);
$group = array(&quot;_id&quot; =&gt; array(
                &quot;md5&quot; =&gt; &quot;\$md5&quot;,
                &quot;path&quot; =&gt; &quot;\$path&quot;,
                &quot;a_id&quot;=&gt;&quot;\$a_id&quot;
            ),
                &quot;time&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$found_time&quot;),
                &quot;l_id&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$_id&quot;),
                &quot;v_name&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$v_name&quot;),
                &quot;c_iso_key&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$c_iso_key&quot;),
                &quot;status&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$status&quot;),
                &quot;h_msg&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$h_msg&quot;),
                &quot;r_level&quot; =&gt; array(&quot;\$last&quot; =&gt; &quot;\$r_level&quot;),
            );
$sort = array(&quot;time&quot; =&gt; 1); //æ ¹æ®æ—¶é—´æ’åº
$limit = 5;
//å³ä»¥md5ã€pathã€a_idåˆ†ç»„è·å–å­—æ®µä¸ºfound_timeã€_idã€v_name æœ€åä¸€ä¸ªæ•°æ®ã€æ—¶é—´å€’å™ã€å–å‡º5æ¡
$res = $collection-&gt;aggregate(array(&#39;$match&#39; =&gt; $filter),array(&#39;$group&#39; =&gt; $group),array(&#39;$sort&#39; =&gt; $sort),array(&#39;$limit&#39;=&gt;(int)$limit));
12345678910111213141516171819202122232425
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/doflam-z/doflam-z.github.io/edit/main/services/mongo.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/8/26 06:14:34</span></div><!----></footer><nav class="page-nav"><a href="/services/%E5%AE%89%E8%A3%85es+kibana.html" class="nav-link prev" aria-label="es+kibanaéƒ¨ç½²"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->es+kibanaéƒ¨ç½²</div></a><a href="/services/redis.html" class="nav-link next" aria-label="redis"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">redis<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.eb749dcb.js" defer></script>
  </body>
</html>
