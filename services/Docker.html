<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta property="og:url" content="https://doflam-z.github.io/services/Docker.html"><meta property="og:site_name" content="CodeNote"><meta property="og:title" content="docker笔记"><meta property="og:type" content="article"><meta property="og:updated_time" content="2025-03-25T02:00:00.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2025-03-25T02:00:00.000Z"><title>docker笔记 | CodeNote</title><meta name="description" content="笔记网站。">
    <meta name="keywords" content="学习笔记" />
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.404ae5e6.css">
    <link rel="modulepreload" href="/assets/app.5cc063ec.js"><link rel="modulepreload" href="/assets/Docker.html.82acfbc2.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/Docker.html.daffe097.js">
    <!-- Matomo 此区块为统计代码，请删除-->
    <!-- End Matomo Code 此区块为统计代码，请删除-->
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><!----><!----><span class="site-name">CodeNote</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/blog.html" class="nav-link" aria-label="博客"><span class="icon iconfont icon-blog"></span>博客<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="代码"><span class="title"><span class="icon iconfont icon-code"></span>代码</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/code/PHP" class="nav-link" aria-label="/code/PHP"><!---->/code/PHP<!----></a></li><li class="dropdown-item"><a href="/code/tp6" class="nav-link" aria-label="/code/tp6"><!---->/code/tp6<!----></a></li><li class="dropdown-item"><a href="/code/Python" class="nav-link" aria-label="/code/Python"><!---->/code/Python<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/iptables" class="nav-link" aria-label="/linux/iptables"><!---->/linux/iptables<!----></a></li><li class="dropdown-subitem"><a href="/linux/linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4.html" class="nav-link" aria-label="Linux基础命令"><!---->Linux基础命令<!----></a></li><li class="dropdown-subitem"><a href="/linux/debian10.html" class="nav-link" aria-label="Debian10常用命令"><!---->Debian10常用命令<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="服务"><span class="title"><span class="icon iconfont icon-app"></span>服务</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/services/redis.html" class="nav-link" aria-label="redis"><!---->redis<!----></a></li><li class="dropdown-item"><a href="/services/mysql" class="nav-link" aria-label="/services/mysql"><!---->/services/mysql<!----></a></li><li class="dropdown-item"><a href="/services/mongo.html" class="nav-link" aria-label="mongo"><!---->mongo<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="工具"><span class="title"><span class="icon iconfont icon-tool"></span>工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/tool/Git.html" class="nav-link" aria-label="Git"><!---->Git<!----></a></li><li class="dropdown-item"><a href="/tool/mac.html" class="nav-link" aria-label="mac相关"><!---->mac相关<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><a class="repo-link" href="https://github.com/doflam-z/doflam-z.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">php</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">python</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">linux</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">services</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/services/web_Dockerfile.html" class="nav-link sidebar-link sidebar-page" aria-label="dockerfile编写"><!---->dockerfile编写<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/jobui_docker%E7%8E%AF%E5%A2%83.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker环境启动"><!---->Docker环境启动<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/services/Docker.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="docker笔记"><!---->docker笔记<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装"><!---->安装<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#debian10" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Debian10"><!---->Debian10<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#ubuntu" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ubuntu"><!---->Ubuntu<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#centos7" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Centos7"><!---->Centos7<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#更换镜像加速" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="更换镜像加速"><!---->更换镜像加速<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="命令"><!---->命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#docker-commit" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="docker-commit"><!---->docker-commit<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#docker-compose" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="docker-compose"><!---->docker-compose<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#docker-swarrn" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="docker swarrn"><!---->docker swarrn<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#docker-部署-v2ray" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Docker 部署 V2Ray"><!---->Docker 部署 V2Ray<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#docker按配置启动redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="docker按配置启动redis"><!---->docker按配置启动redis<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#docker启动mysql-并设置初始root密码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="docker启动mysql，并设置初始root密码"><!---->docker启动mysql，并设置初始root密码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#删除缓存" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="删除缓存"><!---->删除缓存<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/services/Docker.html#查看磁盘占用情况及处理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="查看磁盘占用情况及处理"><!---->查看磁盘占用情况及处理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/services/ElasticSearch.html" class="nav-link sidebar-link sidebar-page" aria-label="ElasticSearch"><!---->ElasticSearch<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/%E5%AE%89%E8%A3%85es+kibana.html" class="nav-link sidebar-link sidebar-page" aria-label="es+kibana部署"><!---->es+kibana部署<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/jenkins.html" class="nav-link sidebar-link sidebar-page" aria-label="Jenkins"><!---->Jenkins<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/mongo.html" class="nav-link sidebar-link sidebar-page" aria-label="mongo"><!---->mongo<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/redis.html" class="nav-link sidebar-link sidebar-page" aria-label="redis"><!---->redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/supervisor.html" class="nav-link sidebar-link sidebar-page" aria-label="supervisor"><!---->supervisor<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="nav-link sidebar-link sidebar-page" aria-label="数据库"><!---->数据库<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/services/zabbix.html" class="nav-link sidebar-link sidebar-page" aria-label="源码安装zabbix5.4（centos6）"><!---->源码安装zabbix5.4（centos6）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">工具</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><a href="/blog.html" class="title">博客</a><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->docker笔记</h1><div class="page-info"><!----><!----><span class="words-info" aria-label="字数🔠" data-balloon-pos="down" localizeddate="2022年8月25日" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 2082 字</span><meta property="wordCount" content="2082"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年8月25日" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 7 分钟</span><meta property="timeRequired" content="PT7M"></span><span class="visitor-info" aria-label="访问量🔢" data-balloon-pos="down" localizeddate="2022年8月25日" isoriginal="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" data-path="/services/Docker.html">...</span></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#安装" class="router-link-active router-link-exact-active toc-link level3">安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#debian10" class="router-link-active router-link-exact-active toc-link level3">Debian10</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#ubuntu" class="router-link-active router-link-exact-active toc-link level3">Ubuntu</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#centos7" class="router-link-active router-link-exact-active toc-link level3">Centos7</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#更换镜像加速" class="router-link-active router-link-exact-active toc-link level3">更换镜像加速</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#命令" class="router-link-active router-link-exact-active toc-link level3">命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#docker-commit" class="router-link-active router-link-exact-active toc-link level3">docker-commit</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#docker-compose" class="router-link-active router-link-exact-active toc-link level3">docker-compose</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#docker-swarrn" class="router-link-active router-link-exact-active toc-link level3">docker swarrn</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#docker-部署-v2ray" class="router-link-active router-link-exact-active toc-link level3">Docker 部署 V2Ray</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#docker按配置启动redis" class="router-link-active router-link-exact-active toc-link level3">docker按配置启动redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#docker启动mysql-并设置初始root密码" class="router-link-active router-link-exact-active toc-link level3">docker启动mysql，并设置初始root密码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#删除缓存" class="router-link-active router-link-exact-active toc-link level3">删除缓存</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/services/Docker.html#查看磁盘占用情况及处理" class="router-link-active router-link-exact-active toc-link level3">查看磁盘占用情况及处理</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="docker笔记" tabindex="-1"><a class="header-anchor" href="#docker笔记" aria-hidden="true">#</a> docker笔记</h1><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><blockquote><p>注意！安装docker需要有创建用户的权限，既/etc/gshadow跟/etc/group不能+i</p></blockquote><h3 id="debian10" tabindex="-1"><a class="header-anchor" href="#debian10" aria-hidden="true">#</a> Debian10</h3><p>卸载旧版本</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> docker-engine docker.io containerd runc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>设置储存库</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token function">sudo</span> <span class="token function">apt-get</span> update
 <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token punctuation">\</span>
    apt-transport-https <span class="token punctuation">\</span>
    ca-certificates <span class="token punctuation">\</span>
    <span class="token function">curl</span> <span class="token punctuation">\</span>
    gnupg <span class="token punctuation">\</span>
    lsb-release
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加Docker官方的GPG密钥：</p><div class="language-shel ext-shel line-numbers-mode"><pre class="language-shel"><code>curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加稳定储存库</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token punctuation">\</span>
  <span class="token string">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian \
  <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce docker-ce-cli containerd.io
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu" aria-hidden="true">#</a> Ubuntu</h3><p>在 <strong>Ubuntu</strong> 上安装 <strong>Docker</strong> 的完整步骤如下：</p><table><thead><tr><th><strong>步骤</strong></th><th><strong>命令</strong></th></tr></thead><tbody><tr><td>更新系统</td><td>sudo apt update &amp;&amp; sudo apt upgrade -y</td></tr><tr><td>安装依赖</td><td>sudo apt install -y apt-transport-https ca-certificates curl software-properties-common</td></tr><tr><td>添加 GPG 密钥</td><td>curl -fsSL &quot;https://download.docker.com/linux/ubuntu/gpg&quot; | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</td></tr><tr><td>添加 Docker 源</td><td>echo “deb [arch=$(dpkg –print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable”</td></tr><tr><td>安装 Docker</td><td>sudo apt install -y docker-ce docker-ce-cli containerd.io</td></tr><tr><td>启动 Docker</td><td>sudo systemctl start docker &amp;&amp; sudo systemctl enable docker</td></tr><tr><td>运行测试容器</td><td>sudo docker run hello-world</td></tr><tr><td>允许非 root 用户使用 Docker</td><td>sudo usermod -aG docker $USER</td></tr><tr><td>安装 Docker Compose</td><td>sudo apt install -y docker-compose</td></tr></tbody></table><h3 id="centos7" tabindex="-1"><a class="header-anchor" href="#centos7" aria-hidden="true">#</a> Centos7</h3><p>卸载旧版本</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum remove <span class="token function">docker</span>  docker-common docker-selinux docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装依赖+yum源</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils device-mapper-persistent-data lvm2
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看可用docker版本</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum list docker-ce <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装最新版本docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> docker-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动并设置开机启动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="更换镜像加速" tabindex="-1"><a class="header-anchor" href="#更换镜像加速" aria-hidden="true">#</a> 更换镜像加速</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker
<span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">&#39;EOF&#39;
{
  &quot;registry-mirrors&quot;: [&quot;https://zany-docker.pages.dev&quot;]
}
EOF</span>
systemctl daemon-reload
systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加可以操作docker的用户到docker组</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> zax
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="命令" tabindex="-1"><a class="header-anchor" href="#命令" aria-hidden="true">#</a> 命令</h3><p>查看docker版本、信息</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> version
<span class="token function">docker</span> info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>启动docker、设置开机自启</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>搜索下载docker镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> search nginx
<span class="token function">docker</span> pull nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> images <span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建容器（-d 后台运行 -v 映射路径 --name指定名称 -p指定端口 ）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx_80 <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-v</span> /home/zax/test.txt:/root/test.txt nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>操作容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> start<span class="token punctuation">\</span>stop<span class="token punctuation">\</span>restart<span class="token punctuation">\</span>kill nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看docker日志</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs <span class="token parameter variable">-tf</span> <span class="token parameter variable">--tail</span> <span class="token number">10</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看docker容器内部进程</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">top</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看镜像信息</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> image inspect nginx:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看容器信息</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> inspect nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>停止容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> stop nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>进入容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> centos7_test1 /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>退出容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>exit<span class="token punctuation">(</span>直接退出<span class="token punctuation">)</span>
ctrl+P+Q<span class="token punctuation">(</span>不停止退出<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>删除容器(删除前需要先退出)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">rm</span> nginx
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-qa</span><span class="token variable">)</span></span><span class="token punctuation">(</span>删除全部容器<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>删除镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> rmi nginx<span class="token punctuation">(</span>镜像名称<span class="token punctuation">)</span>
<span class="token function">docker</span> rmi <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images <span class="token parameter variable">-qa</span><span class="token variable">)</span></span><span class="token punctuation">(</span>删除全部镜像<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-commit" tabindex="-1"><a class="header-anchor" href="#docker-commit" aria-hidden="true">#</a> docker-commit</h3><p>登录自己的账户</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> login <span class="token parameter variable">-u</span> doflamingozzz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>生成一个镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> commit <span class="token parameter variable">-m</span><span class="token operator">=</span><span class="token string">&quot;php7.4&quot;</span> <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">&quot;zax&quot;</span> a92f10ff5967 php7.4:1.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加tag</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> tag a92f10ff5967 doflamingozzz/php7.4:1.0
<span class="token function">docker</span> tag 5a467601e38d doflamingozzz/php7.4:1.1

<span class="token function">docker</span> tag 5d34d12b8470 doflamingozzz/nginx-1.15.8.3:1.0
<span class="token function">docker</span> tag d935db9ae9f6 doflamingozzz/nginx-1.15.8.3:1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>提交镜像到仓库</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> push doflamingozzz/php7.4:1.1
<span class="token function">docker</span> push doflamingozzz/nginx-1.15.8.3:1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>docker pull doflamingozzz/nginx-1.15.8.3:1.0</p><p>docker pull doflamingozzz/php7.4:1.0</p><h3 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a> docker-compose</h3><p>安装compaose</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>https://github.com/docker/compose/releases/download/v2.28.0/docker-compose-linux-x86_64
<span class="token function">chmod</span> +x /usr/bin/docker-compose
<span class="token function">docker-compose</span> <span class="token parameter variable">--version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-swarrn" tabindex="-1"><a class="header-anchor" href="#docker-swarrn" aria-hidden="true">#</a> docker swarrn</h3><p>初始化一个主节点11，生成worker节点token，生成管理节点token</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> swarm init --advertise-addr <span class="token number">192.168</span>.10.11
<span class="token function">docker</span> swarm join-token worker
<span class="token function">docker</span> swarm join-token manager
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看节点</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">node</span> <span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个服务</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">service</span> create <span class="token parameter variable">-p</span> <span class="token number">8080</span>:80 <span class="token parameter variable">--name</span> nginx_test1 nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看服务</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">service</span> <span class="token function">ps</span> nginx_test1
<span class="token function">docker</span> <span class="token function">service</span> <span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>更新服务（弹性扩展3台nginx）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">service</span> update <span class="token parameter variable">--replicas</span> <span class="token number">3</span> nginx_test1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>删除服务</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">service</span> <span class="token function">rm</span> nginx_test1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="docker-部署-v2ray" tabindex="-1"><a class="header-anchor" href="#docker-部署-v2ray" aria-hidden="true">#</a> Docker 部署 V2Ray</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#安装docker</span>
https://www.v2ray.com/chapter_00/install.html
https://toutyrater.github.io/app/docker-deploy-v2ray.html

Docker 技术是一种新的虚拟化技术，和传统的虚拟化技术不同。V2Ray 同样提供 Docker 部署方式，并且通过 Docker 来部署 V2Ray 会非常轻松高效。

Docker 只能部署在 KVM 或者 XEN 架构的 VPS中

首先安装 Docker：
$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">docker</span>
安装完 Docker 后我们从 DockerHub 通过搜索找到 V2Ray 官方提供的镜像， 链接在此. 找到拉取镜像的的命令并复制下来，在网页右侧我们可以看到命令为 <span class="token function">docker</span> pull v2ray/official ，我们将其复制下来回到命令行中粘贴并执行：

$ <span class="token function">sudo</span> <span class="token function">docker</span> pull v2ray/official
待 V2Ray 的 Docker 镜像拉取完成后就可以进入下一个部署阶段. 在此之前，你需要在 /etc 目录下新建一个文件夹 v2ray， 并把你的配置写好后命名为 config.json 放入 v2ray 文件夹内. 待配置文件准备就绪后键入以下命令进行部署，部署前请记下配置文件中你所设置的端口号，在部署时需要将其映射到宿主机上. 否则将无法访问. 此处假设设定的端口号为8888，需要映射到宿主机的8888端口上. 则命令为：

$ <span class="token function">sudo</span> <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> v2ray <span class="token parameter variable">-v</span> /etc/v2ray:/etc/v2ray <span class="token parameter variable">-p</span> <span class="token number">8888</span>:8888 v2ray/official  v2ray <span class="token parameter variable">-config</span><span class="token operator">=</span>/etc/v2ray/config.json
键入以上命令后，命令行会出现一串字符，代表容器部署成功，可以立即通过客户端连接并开始使用了. 如果还不放心，键入以下命令来查看容器的运行状态：

$ <span class="token function">sudo</span> <span class="token function">docker</span> container <span class="token function">ls</span>
如果看到输出的结果中有以下字段代表容器成功运行：

$ <span class="token function">docker</span> container <span class="token function">ls</span>
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                     NAMES
2a7sdo87kdf3        v2ray/official        <span class="token string">&quot;v2ray -config=/et...&quot;</span>   <span class="token number">3</span> minutes ago       Up <span class="token number">3</span> minutes        <span class="token number">0.0</span>.0.0:8888-<span class="token operator">&gt;</span><span class="token number">8888</span>/tcp    v2ray
通过以下命令来启动 V2Ray：

$ <span class="token function">sudo</span> <span class="token function">docker</span> container start v2ray
停止 V2Ray：

$ <span class="token function">sudo</span> <span class="token function">docker</span> container stop v2ray
重启 V2Ray：

$ <span class="token function">sudo</span> <span class="token function">docker</span> container restart v2ray
查看日志：

$ <span class="token function">sudo</span> <span class="token function">docker</span> container logs v2ray
更新配置后，需要重新部署容器，命令如下：

$ <span class="token function">sudo</span> <span class="token function">docker</span> container stop v2ray
$ <span class="token function">sudo</span> <span class="token function">docker</span> container <span class="token function">rm</span> v2ray
$ <span class="token function">sudo</span> <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> v2ray <span class="token parameter variable">-v</span> /etc/v2ray:/etc/v2ray <span class="token parameter variable">-p</span> <span class="token number">8888</span>:8888 v2ray/official  v2ray <span class="token parameter variable">-config</span><span class="token operator">=</span>/etc/v2ray/config.json
假如你的配置换了端口号，那么相应的端口映射也要更改，假如你在配置文件中把监听端口改为了9999，则<span class="token string">&#39;-p&#39;</span>参数应该这样写：

<span class="token parameter variable">-p</span>  <span class="token number">9999</span>:9999
假如你想将容器中的端口映射到本机的端口，则命令应该这样写

<span class="token parameter variable">-p</span> <span class="token number">127.0</span>.0.1:端口号:端口号
如果 V2Ray 用的传输层协议是 mKCP，由于 mKCP 基于 UDP，那么需要指定映射的端口是 UDP：

<span class="token parameter variable">-p</span>  <span class="token number">9999</span>:9999/udp
除非你打算使用Nginx来转发Websocket否则不需要映射到本地，直接填写端口号:端口号的形式即可

另外，如果开启了动态端口，-p 标记可以多次使用来绑定多个端口. 具体用法是在指令中再加上多个 <span class="token parameter variable">-p</span> 标记即可。

更新 V2Ray 的 Docker 镜像：

$ <span class="token function">docker</span> pull v2ray/official
更新完之后，你需要重新部署容器，方法见上。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-e导致命令停止任何<a href="https://www.jb51.cc/tag/cuowu/" target="_blank" rel="noopener noreferrer">错误<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.更典型的语法是用&amp;&amp;和/或停止任何<a href="https://www.jb51.cc/tag/cuowu/" target="_blank" rel="noopener noreferrer">错误<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>-x使shell<a href="https://www.jb51.cc/tag/shuchu/" target="_blank" rel="noopener noreferrer">输出<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>正在运行的每个命令.这对于调试脚本很有用.</p><h3 id="docker按配置启动redis" tabindex="-1"><a class="header-anchor" href="#docker按配置启动redis" aria-hidden="true">#</a> docker按配置启动redis</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-v</span> /myredis/conf:/usr/local/etc/redis <span class="token parameter variable">--name</span> myredis redis redis-server /usr/local/etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="docker启动mysql-并设置初始root密码" tabindex="-1"><a class="header-anchor" href="#docker启动mysql-并设置初始root密码" aria-hidden="true">#</a> docker启动mysql，并设置初始root密码</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql:5.7
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token parameter variable">-p</span> <span class="token number">3307</span>:3306 <span class="token parameter variable">-d</span> mysql/mysql-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql01 <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3310</span>:3306 <span class="token parameter variable">-v</span> /home/mysql/conf:/etc/mysql/conf.d <span class="token parameter variable">-v</span> /home/mysql/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> mysql:5.7
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql-5.5.57 <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-v</span> /mysql/docker/mysql-5.5.57/conf:/etc/mysql/conf. <span class="token parameter variable">-v</span> /mysql/docker/mysql-5.5.57/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token string">&#39;P#H^}d@+5mp1ifg&gt;&#39;</span> mysql:5.5.57
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>解析： --name mysql01 # 对容器的命名 -d #后台运行 -p 3310:3306 #对外暴露端口号3310 -v /home/mysql/conf:/etc/mysql/conf.d #配置文件挂载到当前宿主机的/home/mysql/conf -v /home/mysql/data:/var/lib/mys ql #数据挂载到当前宿主机的 /home/mysql/data -e MYSQL_ROOT_PASSWORD=123456 #设置mysql的root用户的密码是：·123456</p></blockquote><blockquote><p>docker 18.03 加入了一个 feature，在容器中可以通过 host.docker.internal 来访问主机</p></blockquote><h3 id="删除缓存" tabindex="-1"><a class="header-anchor" href="#删除缓存" aria-hidden="true">#</a> 删除缓存</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>shelldocker system prune <span class="token parameter variable">-a</span> <span class="token parameter variable">--force</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="查看磁盘占用情况及处理" tabindex="-1"><a class="header-anchor" href="#查看磁盘占用情况及处理" aria-hidden="true">#</a> 查看磁盘占用情况及处理</h3><blockquote><p>找到占用磁盘的容器后，处理删除数据后重启容器，还需要把卷删除才会释放磁盘空间</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> system <span class="token function">df</span> <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>根据卷名定位容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">volume</span><span class="token operator">=</span>278bcef3b560aa391ae2dec32b4713bcc8dc7662207c7ec02265831542f08124
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>删除无用卷</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker volume prune
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/doflam-z/doflam-z.github.io/edit/main/services/Docker.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2025/3/25 02:00:00</span></div><!----></footer><nav class="page-nav"><a href="/services/jobui_docker%E7%8E%AF%E5%A2%83.html" class="nav-link prev" aria-label="Docker环境启动"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->Docker环境启动</div></a><a href="/services/ElasticSearch.html" class="nav-link next" aria-label="ElasticSearch"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">ElasticSearch<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.5cc063ec.js" defer></script>
  </body>
</html>
